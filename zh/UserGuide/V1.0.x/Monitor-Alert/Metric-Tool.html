<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="alternate" hreflang="en-us" href="https://iotdb.apache.org/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html"><meta property="og:url" content="https://iotdb.apache.org/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html"><meta property="og:site_name" content="IoTDB Website"><meta property="og:description" content="在 IoTDB 的运行过程中，我们希望对 IoTDB 的状态进行观测，以便于排查系统问题或者及时发现系统潜在的风险，能够反映系统运行状态的一系列指标 就是系统监控指标。 1. 什么场景下会使用到监控? 那么什么时候会用到监控框架呢？下面列举一些常见的场景。 1. 系统变慢了 系统变慢几乎是最常见也最头疼的问题，这时候我们需要尽可能多的信息来帮助我们找到..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"","image":[""],"dateModified":null,"author":[]}</script><link rel="icon" href="/favicon.ico"><meta name="Description" content="Apache IoTDB: Time Series Database for IoT"><meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据"><meta name="baidu-site-verification" content="wfKETzB3OT"><meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo"><title>IoTDB Website</title><meta name="description" content="在 IoTDB 的运行过程中，我们希望对 IoTDB 的状态进行观测，以便于排查系统问题或者及时发现系统潜在的风险，能够反映系统运行状态的一系列指标 就是系统监控指标。 1. 什么场景下会使用到监控? 那么什么时候会用到监控框架呢？下面列举一些常见的场景。 1. 系统变慢了 系统变慢几乎是最常见也最头疼的问题，这时候我们需要尽可能多的信息来帮助我们找到...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-fc34159e.css" as="style"><link rel="stylesheet" href="/assets/style-fc34159e.css">
    <link rel="modulepreload" href="/assets/app-2f69ed0f.js"><link rel="modulepreload" href="/assets/framework-6055ecdb.js"><link rel="modulepreload" href="/assets/Metric-Tool.html-39976e78.js"><link rel="modulepreload" href="/assets/204018765-6fda9391-ebcf-4c80-98c5-26f34bd74df0-c66fd211.js"><link rel="modulepreload" href="/assets/112426760-73e3da80-8d73-11eb-9a8f-9232d1f2033b-7f7de087.js"><link rel="modulepreload" href="/assets/dashboard-33f931cf.js"><link rel="modulepreload" href="/assets/Metric-Tool.html-0d6b6f2f.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar hide-icon" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/zh/" class="brand"><img class="logo" src="/logo.png" alt="IoTDB Website"><!----><span class="site-name hide-in-pad">IoTDB Website</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><div id="docsearch-container"></div><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="文档"><span class="title"><!---->文档</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/UserGuide/Master/QuickStart/QuickStart.html" class="nav-link" aria-label="latest"><!---->latest<!----></a></li><li class="dropdown-item"><a href="/zh/UserGuide/V1.1.x/QuickStart/QuickStart.html" class="nav-link" aria-label="v1.1.x"><!---->v1.1.x<!----></a></li><li class="dropdown-item"><a href="/zh/UserGuide/V1.0.x/QuickStart/QuickStart.html" class="nav-link" aria-label="v1.0.x"><!---->v1.0.x<!----></a></li><li class="dropdown-item"><a href="/zh/UserGuide/V0.13.x/QuickStart/QuickStart.html" class="nav-link" aria-label="v0.13.x"><!---->v0.13.x<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=177051872" rel="noopener noreferrer" target="_blank" aria-label="系统设计" class="nav-link"><!---->系统设计<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/Download/" class="nav-link" aria-label="下载"><!---->下载<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="社区"><span class="title"><!---->社区</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/Community/About.html" class="nav-link" aria-label="关于社区"><!---->关于社区<!----></a></li><li class="dropdown-item"><a href="https://cwiki.apache.org/confluence/display/iotdb" rel="noopener noreferrer" target="_blank" aria-label="Wiki" class="nav-link"><!---->Wiki<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="/zh/Community/Community-Project-Committers.html" class="nav-link" aria-label="开发人员"><!---->开发人员<!----></a></li><li class="dropdown-item"><a href="/zh/Community/Community-Powered-By.html" class="nav-link" aria-label="技术支持"><!---->技术支持<!----></a></li><li class="dropdown-item"><a href="/Community/Materials.html" class="nav-link" aria-label="活动与报告"><!---->活动与报告<!----></a></li><li class="dropdown-item"><a href="/zh/Community/Feedback.html" class="nav-link" aria-label="交流与反馈"><!---->交流与反馈<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="开发"><span class="title"><!---->开发</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/zh/Development/VoteRelease.html" class="nav-link" aria-label="如何投票"><!---->如何投票<!----></a></li><li class="dropdown-item"><a href="/zh/Development/HowToCommit.html" class="nav-link" aria-label="如何提交代码"><!---->如何提交代码<!----></a></li><li class="dropdown-item"><a href="/zh/Development/HowToJoin.html" class="nav-link" aria-label="成为Contributor"><!---->成为Contributor<!----></a></li><li class="dropdown-item"><a href="/zh/Development/Committer.html" class="nav-link" aria-label="成为Committer"><!---->成为Committer<!----></a></li><li class="dropdown-item"><a href="/zh/Development/ContributeGuide.html" class="nav-link" aria-label="项目开发指南"><!---->项目开发指南<!----></a></li><li class="dropdown-item"><a href="/zh/Development/HowtoContributeCode.html" class="nav-link" aria-label="技术贡献指南"><!---->技术贡献指南<!----></a></li><li class="dropdown-item"><a href="/zh/Development/format-changelist.html" class="nav-link" aria-label="TsFile的更改列表"><!---->TsFile的更改列表<!----></a></li><li class="dropdown-item"><a href="/zh/Development/rpc-changelist.html" class="nav-link" aria-label="RPC变更清单"><!---->RPC变更清单<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ASF"><span class="title"><!---->ASF</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://www.apache.org/" rel="noopener noreferrer" target="_blank" aria-label="基金会" class="nav-link"><!---->基金会<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/licenses/" rel="noopener noreferrer" target="_blank" aria-label="许可证" class="nav-link"><!---->许可证<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/security/" rel="noopener noreferrer" target="_blank" aria-label="安全" class="nav-link"><!---->安全<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/foundation/sponsorship.html" rel="noopener noreferrer" target="_blank" aria-label="赞助" class="nav-link"><!---->赞助<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/foundation/thanks.html" rel="noopener noreferrer" target="_blank" aria-label="致谢" class="nav-link"><!---->致谢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/events/current-event" rel="noopener noreferrer" target="_blank" aria-label="活动" class="nav-link"><!---->活动<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html" class="nav-link" aria-label="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html" class="router-link-active router-link-exact-active nav-link active" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div class="nav-item"><a class="repo-link" href="https://github.com/apache/iotdb" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">IoTDB用户手册 (V1.0.x)</span><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">关于IoTDB</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">快速上手</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">数据模式与概念</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">语法约定</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">应用编程接口</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">元数据操作</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">数据写入（数据更新）</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">数据删除</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">数据查询</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">运算符和函数</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">触发器</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">监控告警</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="监控工具"><!---->监控工具<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_1-什么场景下会使用到监控" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. 什么场景下会使用到监控?"><!---->1. 什么场景下会使用到监控?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_2-什么人需要使用监控" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. 什么人需要使用监控?"><!---->2. 什么人需要使用监控?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-什么是监控指标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. 什么是监控指标？"><!---->3. 什么是监控指标？<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-1-监控指标名词解释" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1. 监控指标名词解释"><!---->3.1. 监控指标名词解释<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-2-监控指标对外获取数据格式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2. 监控指标对外获取数据格式"><!---->3.2. 监控指标对外获取数据格式<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-监控指标有哪些" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. 监控指标有哪些？"><!---->4. 监控指标有哪些？<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-1-core-级别监控指标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1. Core 级别监控指标"><!---->4.1. Core 级别监控指标<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-2-important-级别监控指标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2. Important 级别监控指标"><!---->4.2. Important 级别监控指标<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-3-normal-级别监控指标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3. Normal 级别监控指标"><!---->4.3. Normal 级别监控指标<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-4-all-级别监控指标" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4. All 级别监控指标"><!---->4.4. All 级别监控指标<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-怎样获取这些系统监控" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. 怎样获取这些系统监控？"><!---->5. 怎样获取这些系统监控？<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-1-使用-jmx-方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1. 使用 JMX 方式"><!---->5.1. 使用 JMX 方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-2-使用-prometheus-方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2. 使用 Prometheus 方式"><!---->5.2. 使用 Prometheus 方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-3-使用-iotdb-方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3. 使用 IoTDB 方式"><!---->5.3. 使用 IoTDB 方式<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/UserGuide/V1.0.x/Monitor-Alert/Alerting.html" class="nav-link sidebar-link sidebar-page" aria-label="告警机制"><!---->告警机制<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">权限管理</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">运维工具</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">端云协同</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">系统集成</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">分布式</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">FAQ</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">参考</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!----></h1><div class="page-info"><!----><!----><!----><!----><span class="page-reading-time-info" aria-label="阅读时间"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 21 分钟</span><meta property="timeRequired" content="PT21M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_1-什么场景下会使用到监控" class="router-link-active router-link-exact-active toc-link level2">1. 什么场景下会使用到监控?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_2-什么人需要使用监控" class="router-link-active router-link-exact-active toc-link level2">2. 什么人需要使用监控?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-什么是监控指标" class="router-link-active router-link-exact-active toc-link level2">3. 什么是监控指标？</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-1-监控指标名词解释" class="router-link-active router-link-exact-active toc-link level3">3.1. 监控指标名词解释</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_3-2-监控指标对外获取数据格式" class="router-link-active router-link-exact-active toc-link level3">3.2. 监控指标对外获取数据格式</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-监控指标有哪些" class="router-link-active router-link-exact-active toc-link level2">4. 监控指标有哪些？</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-1-core-级别监控指标" class="router-link-active router-link-exact-active toc-link level3">4.1. Core 级别监控指标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-2-important-级别监控指标" class="router-link-active router-link-exact-active toc-link level3">4.2. Important 级别监控指标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-3-normal-级别监控指标" class="router-link-active router-link-exact-active toc-link level3">4.3. Normal 级别监控指标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_4-4-all-级别监控指标" class="router-link-active router-link-exact-active toc-link level3">4.4. All 级别监控指标</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-怎样获取这些系统监控" class="router-link-active router-link-exact-active toc-link level2">5. 怎样获取这些系统监控？</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-1-使用-jmx-方式" class="router-link-active router-link-exact-active toc-link level3">5.1. 使用 JMX 方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-2-使用-prometheus-方式" class="router-link-active router-link-exact-active toc-link level3">5.2. 使用 Prometheus 方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.html#_5-3-使用-iotdb-方式" class="router-link-active router-link-exact-active toc-link level3">5.3. 使用 IoTDB 方式</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at
    
        http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

--><p>在 IoTDB 的运行过程中，我们希望对 IoTDB 的状态进行观测，以便于排查系统问题或者及时发现系统潜在的风险，能够**反映系统运行状态的一系列指标 **就是系统监控指标。</p><h2 id="_1-什么场景下会使用到监控" tabindex="-1"><a class="header-anchor" href="#_1-什么场景下会使用到监控" aria-hidden="true">#</a> 1. 什么场景下会使用到监控?</h2><p>那么什么时候会用到监控框架呢？下面列举一些常见的场景。</p><ol><li><p>系统变慢了</p><p>系统变慢几乎是最常见也最头疼的问题，这时候我们需要尽可能多的信息来帮助我们找到系统变慢的原因，比如：</p><ul><li>JVM信息：是不是有FGC？GC耗时多少？GC后内存有没有恢复？是不是有大量的线程？</li><li>系统信息：CPU使用率是不是太高了？磁盘IO是不是很频繁？</li><li>连接数：当前连接是不是太多？</li><li>接口：当前TPS是多少？各个接口耗时有没有变化？</li><li>线程池：系统中各种任务是否有积压？</li><li>缓存命中率</li></ul></li><li><p>磁盘快满了</p><p>这时候我们迫切想知道最近一段时间数据文件的增长情况，看看是不是某种文件有突增。</p></li><li><p>系统运行是否正常</p><p>此时我们可能需要通过错误日志的数量、集群节点的状态等指标来判断系统是否在正常运行。</p></li></ol><h2 id="_2-什么人需要使用监控" tabindex="-1"><a class="header-anchor" href="#_2-什么人需要使用监控" aria-hidden="true">#</a> 2. 什么人需要使用监控?</h2><p>所有关注系统状态的人员都可以使用，包括但不限于研发、测试、运维、DBA等等</p><h2 id="_3-什么是监控指标" tabindex="-1"><a class="header-anchor" href="#_3-什么是监控指标" aria-hidden="true">#</a> 3. 什么是监控指标？</h2><h3 id="_3-1-监控指标名词解释" tabindex="-1"><a class="header-anchor" href="#_3-1-监控指标名词解释" aria-hidden="true">#</a> 3.1. 监控指标名词解释</h3><p>在 IoTDB 的监控模块，每个监控指标被 <code>Metric Name</code> 和 <code>Tags</code> 唯一标识。</p><ul><li><code>Metric Name</code>：指标类型名称，比如<code>logback_events</code>表示日志事件。</li><li><code>Tags</code>：指标分类，形式为Key-Value对，每个指标下面可以有0到多个分类，常见的Key-Value对： <ul><li><code>name = xxx</code>：被监控对象的名称，是对<strong>业务逻辑</strong>的说明。比如对于<code>Metric Name = entry_seconds_count</code> 类型的监控项，name的含义是指被监控的业务接口。</li><li><code>type = xxx</code>：监控指标类型细分，是对<strong>监控指标</strong>本身的说明。比如对于<code>Metric Name = point</code> 类型的监控项，type的含义是指监控具体是什么类型的点数。</li><li><code>status = xxx</code>：被监控对象的状态，是对<strong>业务逻辑</strong>的说明。比如对于<code>Metric Name = Task</code>类型的监控项可以通过该参数，从而区分被监控对象的状态。</li><li><code>user = xxx</code>：被监控对象的相关用户，是对<strong>业务逻辑</strong>的说明。比如统计<code>root</code>用户的写入总点数。</li><li>根据具体情况自定义：比如logback_events_total下有一个level的分类，用来表示特定级别下的日志数量。</li></ul></li><li><code>Metric Level</code>：<strong>指标管理级别</strong>，默认启动级别为<code>Core</code>级别，建议启动级别为<code>Important级别</code> ，审核严格程度<code>Core &gt; Important &gt; Normal &gt; All</code><ul><li><code>Core</code>：系统的核心指标，供<strong>系统内核和运维人员</strong>使用，关乎系统的<strong>性能、稳定性、安全性</strong>，比如实例的状况，系统的负载等。</li><li><code>Important</code>：模块的重要指标，供<strong>运维和测试人员</strong>使用，直接关乎<strong>每个模块的运行状态</strong>，比如合并文件个数、执行情况等。</li><li><code>Normal</code>：模块的一般指标，供<strong>开发人员</strong>使用，方便在出现问题时<strong>定位模块</strong>，比如合并中的特定关键操作情况。</li><li><code>All</code>：模块的全部指标，供<strong>模块开发人员</strong>使用，往往在复现问题的时候使用，从而快速解决问题。</li></ul></li></ul><h3 id="_3-2-监控指标对外获取数据格式" tabindex="-1"><a class="header-anchor" href="#_3-2-监控指标对外获取数据格式" aria-hidden="true">#</a> 3.2. 监控指标对外获取数据格式</h3><ul><li>IoTDB 对外提供 JMX、 Prometheus 和 IoTDB 格式的监控指标： <ul><li>对于 JMX ，可以通过<code>org.apache.iotdb.metrics</code>获取系统监控指标指标。</li><li>对于 Prometheus ，可以通过对外暴露的端口获取监控指标的值</li><li>对于 IoTDB 方式对外暴露：可以通过执行 IoTDB 的查询来获取监控指标</li></ul></li></ul><h2 id="_4-监控指标有哪些" tabindex="-1"><a class="header-anchor" href="#_4-监控指标有哪些" aria-hidden="true">#</a> 4. 监控指标有哪些？</h2><p>目前，IoTDB 对外提供一些主要模块的监控指标，并且随着新功能的开发以及系统优化或者重构，监控指标也会同步添加和更新。如果想自己在 IoTDB 中添加更多系统监控指标埋点，可以参考<a href="https://github.com/apache/iotdb/tree/master/metrics" target="_blank" rel="noopener noreferrer">IoTDB Metrics Framework<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>使用说明。</p><h3 id="_4-1-core-级别监控指标" tabindex="-1"><a class="header-anchor" href="#_4-1-core-级别监控指标" aria-hidden="true">#</a> 4.1. Core 级别监控指标</h3><p>Core 级别的监控指标在系统运行中默认开启，每一个 Core 级别的监控指标的添加都需要经过谨慎的评估，目前 Core 级别的监控指标如下所述：</p><h4 id="_4-1-1-集群运行状态" tabindex="-1"><a class="header-anchor" href="#_4-1-1-集群运行状态" aria-hidden="true">#</a> 4.1.1. 集群运行状态</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>config_node</td><td>name=&quot;total&quot;,status=&quot;Registered/Online/Unknown&quot;</td><td>AutoGauge</td><td>已注册/在线/离线 confignode 的节点数量</td></tr><tr><td>data_node</td><td>name=&quot;total&quot;,status=&quot;Registered/Online/Unknown&quot;</td><td>AutoGauge</td><td>已注册/在线/离线 datanode 的节点数量</td></tr><tr><td>points</td><td>database=&quot;&quot;, type=&quot;flush&quot;</td><td>Gauge</td><td>最新一个刷盘的memtale的点数</td></tr></tbody></table><h4 id="_4-1-2-iotdb-进程运行状态" tabindex="-1"><a class="header-anchor" href="#_4-1-2-iotdb-进程运行状态" aria-hidden="true">#</a> 4.1.2. IoTDB 进程运行状态</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>process_cpu_load</td><td>name=&quot;process&quot;</td><td>AutoGauge</td><td>IoTDB 进程的 CPU 占用率，单位为%</td></tr><tr><td>process_cpu_time</td><td>name=&quot;process&quot;</td><td>AutoGauge</td><td>IoTDB 进程占用的 CPU 时间，单位为ns</td></tr><tr><td>process_max_mem</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>IoTDB 进程最大可用内存</td></tr><tr><td>process_total_mem</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>IoTDB 进程当前已申请内存</td></tr><tr><td>process_free_mem</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>IoTDB 进程当前剩余可用内存</td></tr></tbody></table><h4 id="_4-1-3-系统运行状态" tabindex="-1"><a class="header-anchor" href="#_4-1-3-系统运行状态" aria-hidden="true">#</a> 4.1.3. 系统运行状态</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>sys_cpu_load</td><td>name=&quot;system&quot;</td><td>AutoGauge</td><td>系统的 CPU 占用率，单位为%</td></tr><tr><td>sys_cpu_cores</td><td>name=&quot;system&quot;</td><td>Gauge</td><td>系统的可用处理器数</td></tr><tr><td>sys_total_physical_memory_size</td><td>name=&quot;memory&quot;</td><td>Gauge</td><td>系统的最大物理内存</td></tr><tr><td>sys_free_physical_memory_size</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>系统的剩余可用内存</td></tr><tr><td>sys_total_swap_space_size</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>系统的交换区最大空间</td></tr><tr><td>sys_free_swap_space_size</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>系统的交换区剩余可用空间</td></tr><tr><td>sys_committed_vm_size</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>系统保证可用于正在运行的进程的虚拟内存量</td></tr><tr><td>sys_disk_total_space</td><td>name=&quot;disk&quot;</td><td>AutoGauge</td><td>系统磁盘总大小</td></tr><tr><td>sys_disk_free_space</td><td>name=&quot;disk&quot;</td><td>AutoGauge</td><td>系统磁盘可用大小</td></tr></tbody></table><h3 id="_4-2-important-级别监控指标" tabindex="-1"><a class="header-anchor" href="#_4-2-important-级别监控指标" aria-hidden="true">#</a> 4.2. Important 级别监控指标</h3><p>目前 Important 级别的监控指标如下所述：</p><h4 id="_4-2-1-集群运行状态" tabindex="-1"><a class="header-anchor" href="#_4-2-1-集群运行状态" aria-hidden="true">#</a> 4.2.1. 集群运行状态</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cluster_node_leader_count</td><td>name=&quot;:&quot;</td><td>Gauge</td><td>节点上共识组Leader的数量</td></tr><tr><td>cluster_node_status</td><td>name=&quot;:&quot;,type=&quot;ConfigNode/DataNode&quot;</td><td>Gauge</td><td>节点的状态，0=Unkonwn 1=online</td></tr></tbody></table><h4 id="_4-2-2-节点统计" tabindex="-1"><a class="header-anchor" href="#_4-2-2-节点统计" aria-hidden="true">#</a> 4.2.2. 节点统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>quantity</td><td>name=&quot;database&quot;</td><td>AutoGauge</td><td>系统数据库数量</td></tr><tr><td>quantity</td><td>name=&quot;timeSeries&quot;</td><td>AutoGauge</td><td>系统时间序列数量</td></tr><tr><td>quantity</td><td>name=&quot;pointsIn&quot;</td><td>Counter</td><td>系统累计写入点数</td></tr><tr><td>region</td><td>name=&quot;total&quot;,type=&quot;SchemaRegion&quot;</td><td>AutoGauge</td><td>分区表中 SchemaRegion 总数量</td></tr><tr><td>region</td><td>name=&quot;total&quot;,type=&quot;DataRegion&quot;</td><td>AutoGauge</td><td>分区表中 DataRegion 总数量</td></tr><tr><td>region</td><td>name=&quot;:&quot;,type=&quot;SchemaRegion&quot;</td><td>Gauge</td><td>分区表中对应节点上 DataRegion 总数量</td></tr><tr><td>region</td><td>name=&quot;:&quot;,type=&quot;DataRegion&quot;</td><td>Gauge</td><td>分区表中对应节点上 DataRegion 总数量</td></tr></tbody></table><h4 id="_4-2-3-iot共识协议统计" tabindex="-1"><a class="header-anchor" href="#_4-2-3-iot共识协议统计" aria-hidden="true">#</a> 4.2.3. IoT共识协议统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>iot_consensus</td><td>name=&quot;logDispatcher-:&quot;, region=&quot;&quot;, type=&quot;currentSyncIndex&quot;</td><td>AutoGauge</td><td>副本组同步线程的当前同步进度</td></tr><tr><td>iot_consensus</td><td>name=&quot;logDispatcher-:&quot;, region=&quot;&quot;, type=&quot;cachedRequestInMemoryQueue&quot;</td><td>AutoGauge</td><td>副本组同步线程缓存队列请求总大小</td></tr><tr><td>iot_consensus</td><td>name=&quot;IoTConsensusServerImpl&quot;, region=&quot;&quot;, type=&quot;searchIndex&quot;</td><td>AutoGauge</td><td>副本组主流程写入进度</td></tr><tr><td>iot_consensus</td><td>name=&quot;IoTConsensusServerImpl&quot;, region=&quot;&quot;, type=&quot;safeIndex&quot;</td><td>AutoGauge</td><td>副本组同步进度</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;getStateMachineLock&quot;</td><td>Histogram</td><td>主流程获取状态机锁耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;checkingBeforeWrite&quot;</td><td>Histogram</td><td>主流程写入状态机检查耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;writeStateMachine&quot;</td><td>Histogram</td><td>主流程写入状态机耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;offerRequestToQueue&quot;</td><td>Histogram</td><td>主流程尝试添加队列耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;consensusWrite&quot;</td><td>Histogram</td><td>主流程全写入耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;constructBatch&quot;</td><td>Histogram</td><td>同步线程构造 Batch 耗时</td></tr><tr><td>stage</td><td>name=&quot;iot_consensus&quot;, region=&quot;&quot;, type=&quot;syncLogTimePerRequest&quot;</td><td>Histogram</td><td>异步回调流程同步日志耗时</td></tr></tbody></table><h4 id="_4-2-4-缓存统计" tabindex="-1"><a class="header-anchor" href="#_4-2-4-缓存统计" aria-hidden="true">#</a> 4.2.4. 缓存统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>cache_hit</td><td>name=&quot;chunk&quot;</td><td>AutoGauge</td><td>ChunkCache的命中率，单位为%</td></tr><tr><td>cache_hit</td><td>name=&quot;schema&quot;</td><td>AutoGauge</td><td>SchemaCache的命中率，单位为%</td></tr><tr><td>cache_hit</td><td>name=&quot;timeSeriesMeta&quot;</td><td>AutoGauge</td><td>TimeseriesMetadataCache的命中率，单位为%</td></tr><tr><td>cache_hit</td><td>name=&quot;bloomFilter&quot;</td><td>AutoGauge</td><td>TimeseriesMetadataCache中的bloomFilter的拦截率，单位为%</td></tr><tr><td>cache</td><td>name=&quot;Database&quot;, type=&quot;hit&quot;</td><td>Counter</td><td>Database Cache 的命中次数</td></tr><tr><td>cache</td><td>name=&quot;Database&quot;, type=&quot;all&quot;</td><td>Counter</td><td>Database Cache 的访问次数</td></tr><tr><td>cache</td><td>name=&quot;SchemaPartition&quot;, type=&quot;hit&quot;</td><td>Counter</td><td>SchemaPartition Cache 的命中次数</td></tr><tr><td>cache</td><td>name=&quot;SchemaPartition&quot;, type=&quot;all&quot;</td><td>Counter</td><td>SchemaPartition Cache 的访问次数</td></tr><tr><td>cache</td><td>name=&quot;DataPartition&quot;, type=&quot;hit&quot;</td><td>Counter</td><td>DataPartition Cache 的命中次数</td></tr><tr><td>cache</td><td>name=&quot;DataPartition&quot;, type=&quot;all&quot;</td><td>Counter</td><td>DataPartition Cache 的访问次数</td></tr></tbody></table><h4 id="_4-2-5-接口层统计" tabindex="-1"><a class="header-anchor" href="#_4-2-5-接口层统计" aria-hidden="true">#</a> 4.2.5. 接口层统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>operation</td><td>name = &quot;&quot;</td><td>Histogram</td><td>客户端执行的操作的耗时情况</td></tr><tr><td>entry</td><td>name=&quot;&quot;</td><td>Timer</td><td>Client 建立的 Thrift 的耗时情况</td></tr><tr><td>thrift_connections</td><td>name=&quot;ConfigNodeRPC&quot;</td><td>AutoGauge</td><td>ConfigNode 的内部 Thrift 连接数</td></tr><tr><td>thrift_connections</td><td>name=&quot;Internal&quot;</td><td>AutoGauge</td><td>DataNode 的内部 Thrift 连接数</td></tr><tr><td>thrift_connections</td><td>name=&quot;MPPDataExchange&quot;</td><td>AutoGauge</td><td>MPP 框架的内部 Thrift 连接数</td></tr><tr><td>thrift_connections</td><td>name=&quot;RPC&quot;</td><td>AutoGauge</td><td>Client 建立的 Thrift 连接数</td></tr><tr><td>thrift_active_threads</td><td>name=&quot;ConfigNodeRPC-Service&quot;</td><td>AutoGauge</td><td>ConfigNode 的内部活跃 Thrift 连接数</td></tr><tr><td>thrift_active_threads</td><td>name=&quot;DataNodeInternalRPC-Service&quot;</td><td>AutoGauge</td><td>DataNode 的内部活跃 Thrift 连接数</td></tr><tr><td>thrift_active_threads</td><td>name=&quot;MPPDataExchangeRPC-Service&quot;</td><td>AutoGauge</td><td>MPP 框架的内部活跃 Thrift 连接数</td></tr><tr><td>thrift_active_threads</td><td>name=&quot;ClientRPC-Service&quot;</td><td>AutoGauge</td><td>Client 建立的活跃 Thrift 连接数</td></tr></tbody></table><h4 id="_4-2-6-内存统计" tabindex="-1"><a class="header-anchor" href="#_4-2-6-内存统计" aria-hidden="true">#</a> 4.2.6. 内存统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>mem</td><td>name=&quot;database_&quot;</td><td>AutoGauge</td><td>DataNode内对应DataRegion的内存占用，单位为byte</td></tr><tr><td>mem</td><td>name=&quot;chunkMetaData_&quot;</td><td>AutoGauge</td><td>写入TsFile时的ChunkMetaData的内存占用，单位为byte</td></tr><tr><td>mem</td><td>name=&quot;IoTConsensus&quot;</td><td>AutoGauge</td><td>IoT共识协议的内存占用，单位为byte</td></tr><tr><td>mem</td><td>name=&quot;schema_region_total_usage&quot;</td><td>AutoGauge</td><td>所有SchemaRegion的总内存占用，单位为byte</td></tr><tr><td>mem</td><td>name=&quot;schema_region_total_remaining&quot;</td><td>AutoGauge</td><td>所有SchemaRegion的总内存剩余，单位为byte</td></tr></tbody></table><h4 id="_4-2-7-任务统计" tabindex="-1"><a class="header-anchor" href="#_4-2-7-任务统计" aria-hidden="true">#</a> 4.2.7. 任务统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>queue</td><td>name=&quot;compaction_inner&quot;, status=&quot;running/waiting&quot;</td><td>Gauge</td><td>空间内合并任务数</td></tr><tr><td>queue</td><td>name=&quot;compaction_cross&quot;, status=&quot;running/waiting&quot;</td><td>Gauge</td><td>跨空间合并任务数</td></tr><tr><td>cost_task</td><td>name=&quot;inner_compaction/cross_compaction/flush&quot;</td><td>Gauge</td><td>任务耗时情况</td></tr><tr><td>queue</td><td>name=&quot;flush&quot;,status=&quot;running/waiting&quot;</td><td>AutoGauge</td><td>刷盘任务数</td></tr><tr><td>queue</td><td>name=&quot;Sub_RawQuery&quot;,status=&quot;running/waiting&quot;</td><td>AutoGauge</td><td>Sub_RawQuery任务数</td></tr></tbody></table><h4 id="_4-2-8-合并统计" tabindex="-1"><a class="header-anchor" href="#_4-2-8-合并统计" aria-hidden="true">#</a> 4.2.8. 合并统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data_written</td><td>name=&quot;compaction&quot;, type=&quot;aligned/not-aligned/total&quot;</td><td>Counter</td><td>合并时写入量</td></tr><tr><td>data_read</td><td>name=&quot;compaction&quot;</td><td>Counter</td><td>合并时的读取量</td></tr><tr><td>compaction_task_count</td><td>name = &quot;inner_compaction&quot;, type=&quot;sequence&quot;</td><td>Counter</td><td>顺序空间内合并次数</td></tr><tr><td>compaction_task_count</td><td>name = &quot;inner_compaction&quot;, type=&quot;unsequence&quot;</td><td>Counter</td><td>乱序空间内合并次数</td></tr><tr><td>compaction_task_count</td><td>name = &quot;cross_compaction&quot;, type=&quot;cross&quot;</td><td>Counter</td><td>跨空间合并次数</td></tr></tbody></table><h4 id="_4-2-9-文件统计信息" tabindex="-1"><a class="header-anchor" href="#_4-2-9-文件统计信息" aria-hidden="true">#</a> 4.2.9. 文件统计信息</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>file_size</td><td>name=&quot;wal&quot;</td><td>AutoGauge</td><td>写前日志总大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;seq&quot;</td><td>AutoGauge</td><td>顺序TsFile总大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;unseq&quot;</td><td>AutoGauge</td><td>乱序TsFile总大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;inner-seq-temp&quot;</td><td>AutoGauge</td><td>顺序空间内合并临时文件大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;inner-unseq-temp&quot;</td><td>AutoGauge</td><td>乱序空间内合并临时文件大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;cross-temp&quot;</td><td>AutoGauge</td><td>跨空间合并临时文件大小，单位为byte</td></tr><tr><td>file_size</td><td>name=&quot;mods&quot;</td><td>AutoGauge</td><td>Modification 文件的大小</td></tr><tr><td>file_count</td><td>name=&quot;wal&quot;</td><td>AutoGauge</td><td>写前日志文件个数</td></tr><tr><td>file_count</td><td>name=&quot;seq&quot;</td><td>AutoGauge</td><td>顺序TsFile文件个数</td></tr><tr><td>file_count</td><td>name=&quot;unseq&quot;</td><td>AutoGauge</td><td>乱序TsFile文件个数</td></tr><tr><td>file_count</td><td>name=&quot;inner-seq-temp&quot;</td><td>AutoGauge</td><td>顺序空间内合并临时文件个数</td></tr><tr><td>file_count</td><td>name=&quot;inner-unseq-temp&quot;</td><td>AutoGauge</td><td>乱序空间内合并临时文件个数</td></tr><tr><td>file_count</td><td>name=&quot;cross-temp&quot;</td><td>AutoGauge</td><td>跨空间合并临时文件个数</td></tr><tr><td>file_count</td><td>name=&quot;open_file_handlers&quot;</td><td>AutoGauge</td><td>IoTDB 进程打开文件数，仅支持Linux和MacOS</td></tr><tr><td>file_count</td><td>name=&quot;mods</td><td>AutoGauge</td><td>Modification 文件的数目</td></tr></tbody></table><h4 id="_4-2-10-iotdb-进程统计" tabindex="-1"><a class="header-anchor" href="#_4-2-10-iotdb-进程统计" aria-hidden="true">#</a> 4.2.10. IoTDB 进程统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>process_used_mem</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>IoTDB 进程当前使用内存</td></tr><tr><td>process_mem_ratio</td><td>name=&quot;memory&quot;</td><td>AutoGauge</td><td>IoTDB 进程的内存占用比例</td></tr><tr><td>process_threads_count</td><td>name=&quot;process&quot;</td><td>AutoGauge</td><td>IoTDB 进程当前线程数</td></tr><tr><td>process_status</td><td>name=&quot;process&quot;</td><td>AutoGauge</td><td>IoTDB 进程存活状态，1为存活，0为终止</td></tr></tbody></table><h4 id="_4-2-11-iotdb-日志统计" tabindex="-1"><a class="header-anchor" href="#_4-2-11-iotdb-日志统计" aria-hidden="true">#</a> 4.2.11. IoTDB 日志统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>logback_events</td><td>level=&quot;trace/debug/info/warn/error&quot;</td><td>Counter</td><td>不同类型的日志个数</td></tr></tbody></table><h4 id="_4-2-12-jvm-线程统计" tabindex="-1"><a class="header-anchor" href="#_4-2-12-jvm-线程统计" aria-hidden="true">#</a> 4.2.12. JVM 线程统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>jvm_threads_live_threads</td><td></td><td>AutoGauge</td><td>当前线程数</td></tr><tr><td>jvm_threads_daemon_threads</td><td></td><td>AutoGauge</td><td>当前 Daemon 线程数</td></tr><tr><td>jvm_threads_peak_threads</td><td></td><td>AutoGauge</td><td>峰值线程数</td></tr><tr><td>jvm_threads_states_threads</td><td>state=&quot;runnable/blocked/waiting/timed-waiting/new/terminated&quot;</td><td>AutoGauge</td><td>当前处于各种状态的线程数</td></tr></tbody></table><h4 id="_4-2-13-jvm-gc-统计" tabindex="-1"><a class="header-anchor" href="#_4-2-13-jvm-gc-统计" aria-hidden="true">#</a> 4.2.13. JVM GC 统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>jvm_gc_pause</td><td>action=&quot;end of major GC/end of minor GC&quot;,cause=&quot;xxxx&quot;</td><td>Timer</td><td>不同原因的Young GC/Full GC的次数与耗时</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>jvm_gc_concurrent_phase_time</td><td>action=&quot;&quot;,cause=&quot;&quot;</td><td>Timer</td><td>不同原因的Young GC/Full GC的次数与耗时</td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td>jvm_gc_max_data_size_bytes</td><td></td><td>AutoGauge</td><td>老年代内存的历史最大值</td></tr><tr><td>jvm_gc_live_data_size_bytes</td><td></td><td>AutoGauge</td><td>老年代内存的使用值</td></tr><tr><td>jvm_gc_memory_promoted_bytes</td><td></td><td>Counter</td><td>老年代内存正向增长累计值</td></tr><tr><td>jvm_gc_memory_allocated_bytes</td><td></td><td>Counter</td><td>GC分配内存正向增长累计值</td></tr></tbody></table><h4 id="_4-2-14-jvm-内存统计" tabindex="-1"><a class="header-anchor" href="#_4-2-14-jvm-内存统计" aria-hidden="true">#</a> 4.2.14. JVM 内存统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>jvm_buffer_memory_used_bytes</td><td>id=&quot;direct/mapped&quot;</td><td>AutoGauge</td><td>已经使用的缓冲区大小</td></tr><tr><td>jvm_buffer_total_capacity_bytes</td><td>id=&quot;direct/mapped&quot;</td><td>AutoGauge</td><td>最大缓冲区大小</td></tr><tr><td>jvm_buffer_count_buffers</td><td>id=&quot;direct/mapped&quot;</td><td>AutoGauge</td><td>当前缓冲区数量</td></tr><tr><td>jvm_memory_committed_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>AutoGauge</td><td>当前申请的内存大小</td></tr><tr><td>jvm_memory_max_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>AutoGauge</td><td>最大内存</td></tr><tr><td>jvm_memory_used_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>AutoGauge</td><td>已使用内存大小</td></tr></tbody></table><h4 id="_4-2-15-jvm-类加载统计" tabindex="-1"><a class="header-anchor" href="#_4-2-15-jvm-类加载统计" aria-hidden="true">#</a> 4.2.15. JVM 类加载统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>jvm_classes_unloaded_classes</td><td></td><td>AutoGauge</td><td>累计卸载的class数量</td></tr><tr><td>jvm_classes_loaded_classes</td><td></td><td>AutoGauge</td><td>累计加载的class数量</td></tr></tbody></table><h4 id="_4-2-16-jvm-编译时间统计" tabindex="-1"><a class="header-anchor" href="#_4-2-16-jvm-编译时间统计" aria-hidden="true">#</a> 4.2.16. JVM 编译时间统计</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>jvm_compilation_time_ms</td><td compiler="HotSpot 64-Bit Tiered Compilers,"></td><td>AutoGauge</td><td>耗费在编译上的时间</td></tr></tbody></table><h3 id="_4-3-normal-级别监控指标" tabindex="-1"><a class="header-anchor" href="#_4-3-normal-级别监控指标" aria-hidden="true">#</a> 4.3. Normal 级别监控指标</h3><h4 id="_4-3-1-集群" tabindex="-1"><a class="header-anchor" href="#_4-3-1-集群" aria-hidden="true">#</a> 4.3.1. 集群</h4><table><thead><tr><th>Metric</th><th>Tags</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>region</td><td>name=&quot;&quot;,type=&quot;SchemaRegion/DataRegion&quot;</td><td>AutoGauge</td><td>特定节点上不同 Database 的 DataRegion/SchemaRegion 个数</td></tr><tr><td>slot</td><td>name=&quot;&quot;,type=&quot;schemaSlotNumber/dataSlotNumber&quot;</td><td>AutoGauge</td><td>特定节点上不同 Database 的 DataSlot/SchemaSlot 个数</td></tr></tbody></table><h3 id="_4-4-all-级别监控指标" tabindex="-1"><a class="header-anchor" href="#_4-4-all-级别监控指标" aria-hidden="true">#</a> 4.4. All 级别监控指标</h3><p>目前还没有All级别的监控指标，后续会持续添加。</p><h2 id="_5-怎样获取这些系统监控" tabindex="-1"><a class="header-anchor" href="#_5-怎样获取这些系统监控" aria-hidden="true">#</a> 5. 怎样获取这些系统监控？</h2><ul><li>监控模块的相关配置均在<code>conf/iotdb-{datanode/confignode}.properties</code>中，所有配置项支持通过<code>load configuration</code>命令热加载。</li></ul><h3 id="_5-1-使用-jmx-方式" tabindex="-1"><a class="header-anchor" href="#_5-1-使用-jmx-方式" aria-hidden="true">#</a> 5.1. 使用 JMX 方式</h3><p>对于使用 JMX 对外暴露的指标，可以通过 Jconsole 来进行查看。在进入 Jconsole 监控页面后，首先会看到 IoTDB 的各类运行情况的概览。在这里，您可以看到堆内存信息、线程信息、类信息以及服务器的 CPU 使用情况。</p><h4 id="_5-1-1-获取监控指标数据" tabindex="-1"><a class="header-anchor" href="#_5-1-1-获取监控指标数据" aria-hidden="true">#</a> 5.1.1. 获取监控指标数据</h4><p>连接到 JMX 后，您可以通过 &quot;MBeans&quot; 标签找到名为 &quot;org.apache.iotdb.metrics&quot; 的 &quot;MBean&quot;，可以在侧边栏中查看所有监控指标的具体值。</p><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" alt="metric-jmx" src="/img/github/204018765-6fda9391-ebcf-4c80-98c5-26f34bd74df0.png"><h4 id="_5-1-2-获取其他相关数据" tabindex="-1"><a class="header-anchor" href="#_5-1-2-获取其他相关数据" aria-hidden="true">#</a> 5.1.2. 获取其他相关数据</h4><p>连接到 JMX 后，您可以通过 &quot;MBeans&quot; 标签找到名为 &quot;org.apache.iotdb.service&quot; 的 &quot;MBean&quot;，如下图所示，了解服务的基本状态</p><p><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" src="/img/github/149951720-707f1ee8-32ee-4fde-9252-048caebd232e.png"> <br></p><p>为了提高查询性能，IOTDB 对 ChunkMetaData 和 TsFileMetaData 进行了缓存。用户可以使用 MXBean ，展开侧边栏<code>org.apache.iotdb.db.service</code>查看缓存命中率：</p><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" src="/img/github/112426760-73e3da80-8d73-11eb-9a8f-9232d1f2033b.png"><h3 id="_5-2-使用-prometheus-方式" tabindex="-1"><a class="header-anchor" href="#_5-2-使用-prometheus-方式" aria-hidden="true">#</a> 5.2. 使用 Prometheus 方式</h3><h4 id="_5-2-1-监控指标的-prometheus-映射关系" tabindex="-1"><a class="header-anchor" href="#_5-2-1-监控指标的-prometheus-映射关系" aria-hidden="true">#</a> 5.2.1. 监控指标的 Prometheus 映射关系</h4><blockquote><p>对于 Metric Name 为 name, Tags 为 K1=V1, ..., Kn=Vn 的监控指标有如下映射，其中 value 为具体值</p></blockquote><table><thead><tr><th>监控指标类型</th><th>映射关系</th></tr></thead><tbody><tr><td>Counter</td><td>name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value</td></tr><tr><td>AutoGauge、Gauge</td><td>name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value</td></tr><tr><td>Histogram</td><td>name_max{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_sum{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_count{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.0&quot;} value <br> name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.25&quot;} value <br> name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.5&quot;} value <br> name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.75&quot;} value <br> name{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;1.0&quot;} value</td></tr><tr><td>Rate</td><td>name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, rate=&quot;m1&quot;} value <br> name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, rate=&quot;m5&quot;} value <br> name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, rate=&quot;m15&quot;} value <br> name_total{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, rate=&quot;mean&quot;} value</td></tr><tr><td>Timer</td><td>name_seconds_max{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_seconds_sum{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_seconds_count{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;} value <br> name_seconds{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.0&quot;} value <br> name_seconds{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.25&quot;} value <br> name_seconds{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.5&quot;} value <br> name_seconds{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;0.75&quot;} value <br> name_seconds{k1=&quot;V1&quot;, ..., Kn=&quot;Vn&quot;, quantile=&quot;1.0&quot;} value</td></tr></tbody></table><h4 id="_5-2-2-修改配置文件" tabindex="-1"><a class="header-anchor" href="#_5-2-2-修改配置文件" aria-hidden="true">#</a> 5.2.2. 修改配置文件</h4><ol><li>以 DataNode 为例，修改 iotdb-datanode.properties 配置文件如下：</li></ol><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">dn_metric_reporter_list</span><span class="token punctuation">=</span><span class="token value attr-value">PROMETHEUS</span>
<span class="token key attr-name">dn_metric_level</span><span class="token punctuation">=</span><span class="token value attr-value">CORE</span>
<span class="token key attr-name">dn_metric_prometheus_reporter_port</span><span class="token punctuation">=</span><span class="token value attr-value">9091</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>启动 IoTDB DataNode</p></li><li><p>打开浏览器或者用<code>curl</code> 访问 <code>http://servier_ip:9091/metrics</code>, 就能得到如下 metric 数据：</p></li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>...
# HELP file_count
# TYPE file_count gauge
file_count{name=&quot;wal&quot;,} 0.0
file_count{name=&quot;unseq&quot;,} 0.0
file_count{name=&quot;seq&quot;,} 2.0
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-3-prometheus-grafana" tabindex="-1"><a class="header-anchor" href="#_5-2-3-prometheus-grafana" aria-hidden="true">#</a> 5.2.3. Prometheus + Grafana</h4><p>如上所示，IoTDB 对外暴露出标准的 Prometheus 格式的监控指标数据，可以使用 Prometheus 采集并存储监控指标，使用 Grafana 可视化监控指标。</p><p>IoTDB、Prometheus、Grafana三者的关系如下图所示:</p><figure><img src="/img/UserGuide/System-Tools/Metrics/iotdb_prometheus_grafana.png" alt="iotdb_prometheus_grafana" tabindex="0" loading="lazy"><figcaption>iotdb_prometheus_grafana</figcaption></figure><ol><li>IoTDB在运行过程中持续收集监控指标数据。</li><li>Prometheus以固定的间隔（可配置）从IoTDB的HTTP接口拉取监控指标数据。</li><li>Prometheus将拉取到的监控指标数据存储到自己的TSDB中。</li><li>Grafana以固定的间隔（可配置）从Prometheus查询监控指标数据并绘图展示。</li></ol><p>从交互流程可以看出，我们需要做一些额外的工作来部署和配置Prometheus和Grafana。</p><p>比如，你可以对Prometheus进行如下的配置（部分参数可以自行调整）来从IoTDB获取监控数据</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job_name</span><span class="token punctuation">:</span> pull<span class="token punctuation">-</span>metrics
<span class="token key atrule">honor_labels</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">honor_timestamps</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 15s
<span class="token key atrule">scrape_timeout</span><span class="token punctuation">:</span> 10s
<span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> /metrics
<span class="token key atrule">scheme</span><span class="token punctuation">:</span> http
<span class="token key atrule">follow_redirects</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> localhost<span class="token punctuation">:</span><span class="token number">9091</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多细节可以参考下面的文档：</p><p><a href="https://prometheus.io/docs/prometheus/latest/getting_started/" target="_blank" rel="noopener noreferrer">Prometheus安装使用文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config" target="_blank" rel="noopener noreferrer">Prometheus从HTTP接口拉取metrics数据的配置说明<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://grafana.com/docs/grafana/latest/getting-started/getting-started/" target="_blank" rel="noopener noreferrer">Grafana安装使用文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://prometheus.io/docs/visualization/grafana/#grafana-support-for-prometheus" target="_blank" rel="noopener noreferrer">Grafana从Prometheus查询数据并绘图的文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_5-2-4-apache-iotdb-dashboard" tabindex="-1"><a class="header-anchor" href="#_5-2-4-apache-iotdb-dashboard" aria-hidden="true">#</a> 5.2.4. Apache IoTDB Dashboard</h4><p>我们提供了Apache IoTDB Dashboard，在Grafana中显示的效果图如下所示：</p><figure><img src="/img/UserGuide/System-Tools/Metrics/dashboard.png" alt="Apache IoTDB Dashboard" tabindex="0" loading="lazy"><figcaption>Apache IoTDB Dashboard</figcaption></figure><h5 id="_5-2-4-1-如何获取-apache-iotdb-dashboard" tabindex="-1"><a class="header-anchor" href="#_5-2-4-1-如何获取-apache-iotdb-dashboard" aria-hidden="true">#</a> 5.2.4.1. 如何获取 Apache IoTDB Dashboard？</h5><ol><li>您可以在 GitHub 上获取到Dashboard的json文件。 <ol><li><a href="https://github.com/apache/iotdb/tree/rel/1.0/docs/UserGuide/Monitor-Alert/Apache-IoTDB-ConfigNode-Dashboard.json">Apache IoTDB ConfigNode Dashboard</a></li><li><a href="https://github.com/apache/iotdb/tree/rel/1.0/docs/UserGuide/Monitor-Alert/Apache-IoTDB-DataNode-Dashboard.json">Apache IoTDB DataNode Dashboard</a></li></ol></li><li>您可以访问<a href="https://grafana.com/grafana/dashboards/" target="_blank" rel="noopener noreferrer">Grafana Dashboard官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>搜索<code>Apache IoTDB Dashboard</code>并使用</li></ol><p>在创建Grafana时，您可以选择Import刚刚下载的json文件，并为Apache IoTDB Dashboard选择对应目标数据源。</p><h5 id="_5-2-4-2-apache-iotdb-confignode-dashboard-说明" tabindex="-1"><a class="header-anchor" href="#_5-2-4-2-apache-iotdb-confignode-dashboard-说明" aria-hidden="true">#</a> 5.2.4.2. Apache IoTDB ConfigNode Dashboard 说明</h5><blockquote><p>除特殊说明的监控项以外，以下监控项均保证在Important级别的监控框架中可用。</p></blockquote><ul><li><code>Overview</code>：系统概述 <ul><li><code>Registered Node</code>：注册的ConfigNode/DataNode个数</li><li><code>DataNode</code>：集群DataNode的存活状态，包括Online和Unknown两种。</li><li><code>ConfigNode</code>：集群ConfigNode的存活状态，包括Online和Unknown两种。</li><li><code>The Status Of Node</code>：集群具体节点运行状态，包括Online和Unkown两种。</li></ul></li><li><code>Region</code>：Region概述 <ul><li><code>Region Number</code>：Region个数，包括总个数，DataRegion 个数和 SchemaRegion 个数。</li><li><code>Leadership distribution</code>：集群 Leader 分布情况，指每个节点上对应 Region 的 Leader 的个数。</li><li><code>Total Region in Node</code>：不同 Node 的 Region 总数量。</li><li><code>Region in Node</code>：不同 Node 的 SchemaRegion/DataRegion 数量。</li><li><code>Region in Database</code>（Normal级别）：不同 Database 的 Region 数量，包括 SchemaRegion、DataRegion。</li><li><code>Slot in Database</code>(Normal级别)：不同 Database 的Slot数量，包括 DataSlot 数量和 SchemaSlot 数量。</li></ul></li><li><code>System</code>：系统 <ul><li><code>CPU Core</code>：系统 CPU 核数情况。</li><li><code>CPU Load</code>：系统 CPU 负载情况、进度 CPU 负载情况。</li><li><code>CPU Time Per Minute</code>：进程平均每分钟占用系统 CPU 时间，注意：多核会导致该值超过1分钟。</li><li><code>System Memory</code>：系统物理内存大小、系统使用物理内存大小、虚拟机提交的内存大小。</li><li><code>System Swap Size</code>：系统交换区总大小、系统交换区使用大小。</li><li><code>Process Memory</code>：IoTDB 进程最大内存总大小、IoTDB 进程总内存大小、IoTDB 进程使用内存大小。</li><li><code>The Number of GC Per Minute</code>：平均每分钟 GC 次数。</li><li><code>The Time Consumed Of GC Per Minute</code>：平均每分钟 GC 耗时。</li><li><code>The Number Of Java Thread</code>：IoTDB 进程的不同状态的线程数。</li><li><code>Heap Memory</code>：IoTDB 进程的堆内存</li><li><code>Off Heap Memory</code>：IoTDB 进程的堆外内存</li><li><code>Log Number Per Minute</code>：IoTDB 进程平均每分钟日志数</li><li><code>The Time Consumed of Compliation Per Minute</code>：平均每分钟编译耗时</li><li><code>The Number Of Class</code>：JVM 加载和卸载的类数量</li></ul></li></ul><h5 id="_5-2-4-3-apache-iotdb-datanode-dashboard-说明" tabindex="-1"><a class="header-anchor" href="#_5-2-4-3-apache-iotdb-datanode-dashboard-说明" aria-hidden="true">#</a> 5.2.4.3. Apache IoTDB DataNode Dashboard 说明</h5><blockquote><p>除特殊说明的监控项以外，以下监控项均保证在Important级别的监控框架中可用。</p></blockquote><ul><li><code>Overview</code>：系统概述 <ul><li><code>The Number Of Entity</code>：实体数量，包含时间序列等</li><li><code>Write Point Per Minute</code>：每分钟系统平均写入点数</li><li><code>Database Used Memory</code>：每个 Database 使用的内存大小</li></ul></li><li><code>Interface</code>：接口 <ul><li><code>The Time Consumed Of Operation(50%)</code>：不同客户端操作耗时的中位数</li><li><code>The Time Consumed Of Operation(75%)</code>：不同客户端操作耗时的上四分位数</li><li><code>The Time Consumed Of Operation(100%)</code>：不同客户端操作耗时的最大值</li><li><code>The QPS of Interface</code>：系统接口每秒钟访问次数</li><li><code>The Time Consumed Of Interface</code>：系统接口的平均耗时</li><li><code>Cache Hit Rate</code>：缓存命中率</li><li><code>Thrift Connection</code>：建立的 Thrift 连接个数</li><li><code>Thrift Active Thread</code>：建立的活跃的 Thrift 连接的个数</li></ul></li><li><code>Engine</code>：引擎 <ul><li><code>Task Number</code>：系统中不同状态的任务个数</li><li><code>The Time Consumed Of Tasking</code>：系统中不同状态的任务的耗时</li><li><code>Compaction Read And Write Per Minute</code>：平均每分钟合并读取和写入数据量</li><li><code>Compaction R/W Ratio Per Minute</code>：平均每分钟合并读取和写入数据比</li><li><code>Compaction Number Per Minute</code>：平均每分钟不同类型的合并任务数量</li></ul></li><li><code>IoTConsensus</code>：IoT共识协议 <ul><li><code>IoTConsensus Used Memory</code>：IoT共识层使用的内存大小</li><li><code>IoTConsensus Sync Index</code>：不同的Region的写入Index和同步Index</li><li><code>IoTConsensus Overview</code>：不同节点的同步总差距、总缓存的请求个数</li><li><code>The time consumed of different stages(50%)</code>：不同阶段耗时的中位数</li><li><code>The time consumed of different stages(75%)</code>：不同阶段耗时的上四分位数</li><li><code>The time consumed of different stages(100%)</code>：不同阶段耗时的最大值</li><li><code>IoTConsensus Search Index Rate</code>：不同region的写入Index的增长速度</li><li><code>IoTConsensus Safe Index Rate</code>：不同region的同步Index的增长速度</li><li><code>IoTConsensus LogDispatcher Request Size</code>：不同的LogDispatcherThread缓存的请求个数</li><li><code>Sync Lag</code>：每个region的同步index差距</li><li><code>Min Peer Sync Lag</code>：每个region的写入index和同步最快的LogDispatcherThread的同步index之间的差距</li><li><code>Sync speed diff of Peers</code>：每个region中同步最快的LogDispatcherThread与同步最慢的LogDispatcherThread之间的同步index差距</li></ul></li><li><code>System</code>：系统 <ul><li><code>CPU Core</code>：系统 CPU 核数情况。</li><li><code>CPU Load</code>：系统 CPU 负载情况、进度 CPU 负载情况。</li><li><code>CPU Time Per Minute</code>：进程平均每分钟占用系统 CPU 时间，注意：多核会导致该值超过1分钟。</li><li><code>System Memory</code>：系统物理内存大小、系统使用物理内存大小、虚拟机提交的内存大小。</li><li><code>System Swap Size</code>：系统交换区总大小、系统交换区使用大小。</li><li><code>Process Memory</code>：IoTDB 进程最大内存总大小、IoTDB 进程总内存大小、IoTDB 进程使用内存大小。</li><li><code>The Size Of File</code>：IoTDB系统相关的文件大小，包括wal下的文件总大小、seq下的tsfile文件总大小、unseq下的tsfile文件总大小</li><li><code>The Number Of File</code>：IoTDB系统相关的文件个数，包括wal下的文件个数、seq下的tsfile文件个数、unseq下的tsfile文件个数</li><li><code>The Space Of Disk</code>：当前data目录所挂载的磁盘总大小和剩余大小</li><li><code>The Number of GC Per Minute</code>：平均每分钟 GC 次数。</li><li><code>The Time Consumed Of GC Per Minute</code>：平均每分钟 GC 耗时。</li><li><code>The Number Of Java Thread</code>：IoTDB 进程的不同状态的线程数。</li><li><code>Heap Memory</code>：IoTDB 进程的堆内存</li><li><code>Off Heap Memory</code>：IoTDB 进程的堆外内存</li><li><code>Log Number Per Minute</code>：IoTDB 进程平均每分钟日志数</li><li><code>The Time Consumed of Compliation Per Minute</code>：平均每分钟编译耗时</li><li><code>The Number Of Class</code>：JVM 加载和卸载的类数量</li></ul></li></ul><h3 id="_5-3-使用-iotdb-方式" tabindex="-1"><a class="header-anchor" href="#_5-3-使用-iotdb-方式" aria-hidden="true">#</a> 5.3. 使用 IoTDB 方式</h3><h4 id="_5-3-1-监控指标的-iotdb-映射关系" tabindex="-1"><a class="header-anchor" href="#_5-3-1-监控指标的-iotdb-映射关系" aria-hidden="true">#</a> 5.3.1. 监控指标的 IoTDB 映射关系</h4><blockquote><p>对于 Metric Name 为 name, Tags 为 K1=V1, ..., Kn=Vn 的监控指标有如下映射，以默认写到 root.__system.metric.<code>ip:port</code> 为例</p></blockquote><table><thead><tr><th>监控指标类型</th><th>映射关系</th></tr></thead><tbody><tr><td>Counter</td><td>root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.value</td></tr><tr><td>AutoGauge、Gauge</td><td>root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.value</td></tr><tr><td>Histogram</td><td>root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.count <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.max <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.sum <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p0 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p25 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p50 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p75 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p100</td></tr><tr><td>Rate</td><td>root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.count <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.mean <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m1 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m5 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m15</td></tr><tr><td>Timer</td><td>root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.count <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.max <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.mean <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.sum <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p0 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p25 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p50 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p75 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.p100 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m1 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m5 <br> root.__system.metric.<code>ip:port</code>.name.<code>K1=V1</code>...<code>Kn=Vn</code>.m15</td></tr></tbody></table><h4 id="_5-3-2-获取监控指标" tabindex="-1"><a class="header-anchor" href="#_5-3-2-获取监控指标" aria-hidden="true">#</a> 5.3.2. 获取监控指标</h4><p>根据如上的映射关系，可以构成相关的 IoTDB 查询语句获取监控指标</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/apache/iotdb/edit/master/docs/zh/UserGuide/V1.0.x/Monitor-Alert/Metric-Tool.md" rel="noopener noreferrer" target="_blank" aria-label="发现错误？在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->发现错误？在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><!----><a href="/zh/UserGuide/V1.0.x/Monitor-Alert/Alerting.html" class="nav-link next" aria-label="告警机制"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">告警机制<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer style="padding-bottom:2rem;"><span id="doc-version" style="display:none;">rel/1.0</span><p style="text-align:center;color:#909399;font-size:12px;margin:0 30px;">Copyright © 2023 The Apache Software Foundation.<br> Apache and the Apache feather logo are trademarks of The Apache Software Foundation</p><p style="text-align:center;margin-top:10px;color:#909399;font-size:12px;margin:0 30px;"><strong>Have a question?</strong> Connect with us on QQ, WeChat, or Slack. <a href="https://github.com/apache/iotdb/issues/1995">Join the community</a> now.</p><p style="text-align:center;margin-top:10px;color:#909399;font-size:12px;margin:0 30px;"> We use <a href="https://analytics.google.com">Google Analytics</a> to collect anonymous, aggregated usage information. </p></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-2f69ed0f.js" defer></script>
  </body>
</html>