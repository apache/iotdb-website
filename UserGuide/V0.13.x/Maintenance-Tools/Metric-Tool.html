<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.66" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="alternate" hreflang="zh-cn" href="https://iotdb.apache.org/zh/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html"><meta property="og:url" content="https://iotdb.apache.org/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html"><meta property="og:site_name" content="IoTDB Website"><meta property="og:title" content="1. Monitor Framework"><meta property="og:description" content="Currently, users can use various methods to monitor the running IoTDB process, including using Java's Jconsole tool to monitor the system status of the running IoTDB process, us..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="og:updated_time" content="2023-08-01T06:02:08.000Z"><meta property="article:modified_time" content="2023-08-01T06:02:08.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"1. Monitor Framework","image":[""],"dateModified":"2023-08-01T06:02:08.000Z","author":[]}</script><link rel="icon" href="/favicon.ico"><meta name="Description" content="Apache IoTDB: Time Series Database for IoT"><meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据"><meta name="baidu-site-verification" content="wfKETzB3OT"><meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo"><title>1. Monitor Framework | IoTDB Website</title><meta name="description" content="Currently, users can use various methods to monitor the running IoTDB process, including using Java's Jconsole tool to monitor the system status of the running IoTDB process, us...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-35dc1830.css" as="style"><link rel="stylesheet" href="/assets/style-35dc1830.css">
    <link rel="modulepreload" href="/assets/app-1ba67e78.js"><link rel="modulepreload" href="/assets/Metric-Tool.html-f21f5bdd.js"><link rel="modulepreload" href="/assets/Metric-Tool.html-1b455748.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar hide-icon"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt="IoTDB Website"><!----><span class="vp-site-name hide-in-pad">IoTDB Website</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><div id="docsearch-container"></div><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Documentation"><span class="title"><!---->Documentation</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/UserGuide/V1.1.x/QuickStart/QuickStart.html"><!---->v1.1.x<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/UserGuide/V1.0.x/QuickStart/QuickStart.html"><!---->v1.0.x<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/UserGuide/V0.13.x/QuickStart/QuickStart.html"><!---->v0.13.x<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://cwiki.apache.org/confluence/display/IOTDB/System+Design" rel="noopener noreferrer" target="_blank" aria-label="Design" class="nav-link"><!---->Design<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/Download/"><!---->Download<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Community"><span class="title"><!---->Community</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/Community/About.html"><!---->About<!----></a></li><li class="dropdown-item"><a href="https://cwiki.apache.org/confluence/display/iotdb" rel="noopener noreferrer" target="_blank" aria-label="Wiki" class="nav-link"><!---->Wiki<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Community/Community-Project-Committers.html"><!---->People<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Community/Community-Powered-By.html"><!---->Powered  By<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Community/Materials.html"><!---->Resources<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Community/Feedback.html"><!---->Feedback<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Development"><span class="title"><!---->Development</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/VoteRelease.html"><!---->How  to  vote<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/HowToCommit.html"><!---->How  to  Commit<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/HowToJoin.html"><!---->Become  a  Contributor<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/Committer.html"><!---->Become  a  Committer<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/ContributeGuide.html"><!---->ContributeGuide<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/HowtoContributeCode.html"><!---->How  to  Contribute  Code<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/format-changelist.html"><!---->Changelist  of  TsFile<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/Development/rpc-changelist.html"><!---->Changelist  of  RPC<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ASF"><span class="title"><!---->ASF</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://www.apache.org/" rel="noopener noreferrer" target="_blank" aria-label="Foundation" class="nav-link"><!---->Foundation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/licenses/" rel="noopener noreferrer" target="_blank" aria-label="License" class="nav-link"><!---->License<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/security/" rel="noopener noreferrer" target="_blank" aria-label="Security" class="nav-link"><!---->Security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/foundation/sponsorship.html" rel="noopener noreferrer" target="_blank" aria-label="Sponsorship" class="nav-link"><!---->Sponsorship<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/foundation/thanks.html" rel="noopener noreferrer" target="_blank" aria-label="Thanks" class="nav-link"><!---->Thanks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://www.apache.org/events/current-event" rel="noopener noreferrer" target="_blank" aria-label="Current  Events" class="nav-link"><!---->Current  Events<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button type="button" class="dropdown-title" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link active" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html"><!---->English<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/zh/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html"><!---->简体中文<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/apache/iotdb" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><!----><span class="vp-sidebar-title">IoTDB User Guide (V0.13.x)</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">IoTDB Introduction</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Quick Start</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Data Concept</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Syntax Conventions</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">API</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Operate Metadata</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Write and Delete Data</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Query Data</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Process Data</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Administration Management</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><!----><span class="vp-sidebar-title">Maintenance Tools</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/Maintenance-Command.html"><!---->Maintenance Command<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/Log-Tool.html"><!---->Log Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/JMX-Tool.html"><!---->JMX Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/MLogParser-Tool.html"><!---->MLogParser Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/MLogLoad-Tool.html"><!---->MLogLoad Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/Export-Schema-Tool.html"><!---->Export Schema Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/NodeTool.html"><!---->Node Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/Watermark-Tool.html"><!---->Watermark Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html"><!---->Metric Tool<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-1-when-to-use-monitor-framework"><!---->1.1. When to use monitor framework?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-2-who-will-use-monitor-framework"><!---->1.2. Who will use monitor framework?<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-what-metrics-does-iotdb-have"><!---->1.3. What metrics does IoTDB have?<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-1-key-concept"><!---->1.3.1. Key Concept<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-2-data-format"><!---->1.3.2. Data Format<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-3-iotdb-metrics"><!---->1.3.3. IoTDB Metrics<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-4-iotdb-predefined-metrics-set"><!---->1.3.4. IoTDB PreDefined Metrics Set<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-3-5-add-custom-metrics"><!---->1.3.5. Add custom metrics<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-4-how-to-get-these-metrics"><!---->1.4. How to get these metrics？<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-4-1-iotdb-metric-yml"><!---->1.4.1. Iotdb-metric.yml<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-4-2-integrating-with-prometheus-and-grafana"><!---->1.4.2. Integrating with Prometheus and Grafana<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_1-4-3-apache-iotdb-dashboard"><!---->1.4.3. Apache IoTDB Dashboard<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_4-1-introduction"><!---->4.1. Introduction<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html#_4-2-configuration-parameter"><!---->4.2. Configuration parameter<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/Sync-Tool.html"><!---->Sync Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/UserGuide/V0.13.x/Maintenance-Tools/TsFile-Split-Tool.html"><!---->TsFile Split Tool<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Ecosystem Integration</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">UDF Library</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><!----><span class="vp-sidebar-title">Reference</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->1. Monitor Framework</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing Date"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-08-01T06:02:08.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 10 min</span><meta property="timeRequired" content="PT10M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_1-1-when-to-use-monitor-framework">1.1. When to use monitor framework?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_1-2-who-will-use-monitor-framework">1.2. Who will use monitor framework?</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_1-3-what-metrics-does-iotdb-have">1.3. What metrics does IoTDB have?</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-1-key-concept">1.3.1. Key Concept</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-2-data-format">1.3.2. Data Format</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-3-iotdb-metrics">1.3.3. IoTDB Metrics</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-4-iotdb-predefined-metrics-set">1.3.4. IoTDB PreDefined Metrics Set</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-3-5-add-custom-metrics">1.3.5. Add custom metrics</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_1-4-how-to-get-these-metrics">1.4. How to get these metrics？</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-4-1-iotdb-metric-yml">1.4.1. Iotdb-metric.yml</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-4-2-integrating-with-prometheus-and-grafana">1.4.2. Integrating with Prometheus and Grafana</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#_1-4-3-apache-iotdb-dashboard">1.4.3. Apache IoTDB Dashboard</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_4-1-introduction">4.1. Introduction</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#_4-2-configuration-parameter">4.2. Configuration parameter</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at
    
        http://www.apache.org/licenses/LICENSE-2.0
    
    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

--><p>Currently, users can use various methods to monitor the running IoTDB process, including using Java&#39;s Jconsole tool to monitor the system status of the running IoTDB process, using the interface developed by IoTDB for users to view data statistics, and using the monitor framework to monitor the system status of the running IoTDB process.</p><h1 id="_1-monitor-framework" tabindex="-1"><a class="header-anchor" href="#_1-monitor-framework" aria-hidden="true">#</a> 1. Monitor Framework</h1><p>Along with IoTDB running, some metrics reflecting current system&#39;s status will be collected continuously, which will provide some useful information helping us resolving system problems and detecting potential system risks.</p><h2 id="_1-1-when-to-use-monitor-framework" tabindex="-1"><a class="header-anchor" href="#_1-1-when-to-use-monitor-framework" aria-hidden="true">#</a> 1.1. When to use monitor framework?</h2><p>Belows are some typical application scenarios</p><ol><li><p>System is running slowly</p><p>When system is running slowly, we always hope to have information about system&#39;s running status as detail as possible, such as</p><ul><li>JVM：Is there FGC？How long does it cost？How much does the memory usage decreased after GC？Are there lots of threads？</li><li>System：Is the CPU usage too hi？Are there many disk IOs？</li><li>Connections：How many connections are there in the current time？</li><li>Interface：What is the TPS and latency of every interface？</li><li>ThreadPool：Are there many pending tasks？</li><li>Cache Hit Ratio</li></ul></li><li><p>No space left on device</p><p>When meet a &quot;no space left on device&quot; error, we really want to know which kind of data file had a rapid rise in the past hours.</p></li><li><p>Is the system running in abnormal status</p><p>We could use the count of error logs、the alive status of nodes in cluster, etc, to determine whether the system is running abnormally.</p></li></ol><h2 id="_1-2-who-will-use-monitor-framework" tabindex="-1"><a class="header-anchor" href="#_1-2-who-will-use-monitor-framework" aria-hidden="true">#</a> 1.2. Who will use monitor framework?</h2><p>Any person cares about the system&#39;s status, including but not limited to RD, QA, SRE, DBA, can use the metrics to work more efficiently.</p><h2 id="_1-3-what-metrics-does-iotdb-have" tabindex="-1"><a class="header-anchor" href="#_1-3-what-metrics-does-iotdb-have" aria-hidden="true">#</a> 1.3. What metrics does IoTDB have?</h2><p>For now, we have provided some metrics for several core modules of IoTDB, and more metrics will be added or updated along with the development of new features and optimization or refactoring of architecture.</p><h3 id="_1-3-1-key-concept" tabindex="-1"><a class="header-anchor" href="#_1-3-1-key-concept" aria-hidden="true">#</a> 1.3.1. Key Concept</h3><p>Before step into next, we&#39;d better stop to have a look into some key concepts about metrics.</p><p>Every metric data has two properties</p><ul><li><p>Metric Name</p><p>The name of this metric，for example, <code>logback_events_total</code> indicates the total count of log events。</p></li><li><p>Tag</p><p>Each metric could have 0 or several sub classes (Tag), for the same example, the <code>logback_events_total</code> metric has a sub class named <code>level</code>, which means <code>the total count of log events at the specific level</code></p></li></ul><h3 id="_1-3-2-data-format" tabindex="-1"><a class="header-anchor" href="#_1-3-2-data-format" aria-hidden="true">#</a> 1.3.2. Data Format</h3><p>IoTDB provides metrics data both in JMX and Prometheus format. For JMX, you can get these metrics via <code>org.apache.iotdb.metrics</code>.</p><p>Next, we will choose Prometheus format data as samples to describe each kind of metric.</p><h3 id="_1-3-3-iotdb-metrics" tabindex="-1"><a class="header-anchor" href="#_1-3-3-iotdb-metrics" aria-hidden="true">#</a> 1.3.3. IoTDB Metrics</h3><h4 id="_1-3-3-1-api" tabindex="-1"><a class="header-anchor" href="#_1-3-3-1-api" aria-hidden="true">#</a> 1.3.3.1. API</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>entry_seconds_count</td><td>name=&quot;&quot;</td><td>important</td><td>The total request count of the interface</td><td>entry_seconds_count{name=&quot;openSession&quot;,} 1.0</td></tr><tr><td>entry_seconds_sum</td><td>name=&quot;&quot;</td><td>important</td><td>The total cost seconds of the interface</td><td>entry_seconds_sum{name=&quot;openSession&quot;,} 0.024</td></tr><tr><td>entry_seconds_max</td><td>name=&quot;&quot;</td><td>important</td><td>The max latency of the interface</td><td>entry_seconds_max{name=&quot;openSession&quot;,} 0.024</td></tr><tr><td>quantity_total</td><td>name=&quot;pointsIn&quot;</td><td>important</td><td>The total points inserted into IoTDB</td><td>quantity_total{name=&quot;pointsIn&quot;,} 1.0</td></tr><tr><td>thrift_connections</td><td>name=&quot;&quot;</td><td>core</td><td>current number of thrift connections</td><td>thrift_connections{name=&quot;RPC&quot;,} 1.0</td></tr></tbody></table><h4 id="_1-3-3-2-task" tabindex="-1"><a class="header-anchor" href="#_1-3-3-2-task" aria-hidden="true">#</a> 1.3.3.2. Task</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>queue</td><td>name=&quot;compaction_inner/compaction_cross/flush&quot;,<br>status=&quot;running/waiting&quot;</td><td>important</td><td>The count of current tasks in running and waiting status</td><td>queue{name=&quot;flush&quot;,status=&quot;waiting&quot;,} 0.0<br>queue{name=&quot;flush&quot;,status=&quot;running&quot;,} 0.0</td></tr><tr><td>cost_task_seconds_count</td><td>name=&quot;compaction/flush&quot;</td><td>important</td><td>The total count of tasks occurs till now</td><td>cost_task_seconds_count{name=&quot;flush&quot;,} 1.0</td></tr><tr><td>cost_task_seconds_max</td><td>name=&quot;compaction/flush&quot;</td><td>important</td><td>The seconds of the longest task takes till now</td><td>cost_task_seconds_max{name=&quot;flush&quot;,} 0.363</td></tr><tr><td>cost_task_seconds_sum</td><td>name=&quot;compaction/flush&quot;</td><td>important</td><td>The total cost seconds of all tasks till now</td><td>cost_task_seconds_sum{name=&quot;flush&quot;,} 0.363</td></tr><tr><td>data_written_total</td><td>name=&quot;compaction&quot;, <br>type=&quot;aligned/not-aligned/total&quot;</td><td>important</td><td>The size of data written in compaction</td><td>data_written{name=&quot;compaction&quot;,type=&quot;total&quot;,} 10240</td></tr><tr><td>data_read_total</td><td>name=&quot;compaction&quot;</td><td>important</td><td>The size of data read in compaction</td><td>data_read={name=&quot;compaction&quot;,} 10240</td></tr></tbody></table><h4 id="_1-3-3-3-memory-usage" tabindex="-1"><a class="header-anchor" href="#_1-3-3-3-memory-usage" aria-hidden="true">#</a> 1.3.3.3. Memory Usage</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>mem</td><td>name=&quot;chunkMetaData/storageGroup/schemaUsage/schemaRemaining&quot;</td><td>important</td><td>Current memory size of chunkMetaData/storageGroup/schema usage/schema remaining memory in bytes</td><td>mem{name=&quot;chunkMetaData&quot;,} 2050.0</td></tr></tbody></table><h4 id="_1-3-3-4-cache" tabindex="-1"><a class="header-anchor" href="#_1-3-3-4-cache" aria-hidden="true">#</a> 1.3.3.4. Cache</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>cache_hit</td><td>name=&quot;chunk/timeSeriesMeta/bloomFilter&quot;</td><td>important</td><td>Cache hit ratio of chunk/timeSeriesMeta and prevention ratio of bloom filter</td><td>cache_hit{name=&quot;chunk&quot;,} 80</td></tr></tbody></table><h4 id="_1-3-3-5-business-data" tabindex="-1"><a class="header-anchor" href="#_1-3-3-5-business-data" aria-hidden="true">#</a> 1.3.3.5. Business Data</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>quantity</td><td>name=&quot;timeSeries/storageGroup/device/deviceUsingTemplate&quot;, type=&quot;total/normal/template/template&quot;</td><td>important</td><td>The current count of timeSeries/storageGroup/devices/devices using template in IoTDB</td><td>quantity{name=&quot;timeSeries&quot;,type=&quot;normal&quot;} 1.0</td></tr><tr><td>points</td><td>sg=&quot;&quot;, type=&quot;flush&quot;</td><td>core</td><td>The point number of last flushed memtable</td><td>quantity{name=&quot;memtable&quot;,type=&quot;flush&quot;} 1.0</td></tr></tbody></table><h4 id="_1-3-3-6-cluster" tabindex="-1"><a class="header-anchor" href="#_1-3-3-6-cluster" aria-hidden="true">#</a> 1.3.3.6. Cluster</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>cluster_node_leader_count</td><td>name=&quot;&quot;</td><td>important</td><td>The count of <code>dataGroupLeader</code> on each node, which reflects the distribution of leaders</td><td>cluster_node_leader_count{name=&quot;127.0.0.1&quot;,} 2.0</td></tr><tr><td>cluster_uncommitted_log</td><td>name=&quot;&quot;</td><td>important</td><td>The count of <code>uncommitted_log</code> on each node in data groups it belongs to</td><td>cluster_uncommitted_log{name=&quot;127.0.0.1_Data-127.0.0.1-40010-raftId-0&quot;,} 0.0</td></tr><tr><td>cluster_node_status</td><td>name=&quot;&quot;</td><td>important</td><td>The current node status, 1=online 2=offline</td><td>cluster_node_status{name=&quot;127.0.0.1&quot;,} 1.0</td></tr><tr><td>cluster_elect_total</td><td>name=&quot;&quot;,status=&quot;fail/win&quot;</td><td>important</td><td>The count and result (won or failed) of elections the node participated in.</td><td>cluster_elect_total{name=&quot;127.0.0.1&quot;,status=&quot;win&quot;,} 1.0</td></tr></tbody></table><h3 id="_1-3-4-iotdb-predefined-metrics-set" tabindex="-1"><a class="header-anchor" href="#_1-3-4-iotdb-predefined-metrics-set" aria-hidden="true">#</a> 1.3.4. IoTDB PreDefined Metrics Set</h3><p>Users can modify the value of <code>predefinedMetrics</code> in the <code>iotdb-metric.yml</code> file to enable the predefined set of metrics，now support <code>JVM</code>, <code>LOGBACK</code>, <code>FILE</code>, <code>PROCESS</code>, <code>SYSYTEM</code>.</p><h4 id="_1-3-4-1-jvm" tabindex="-1"><a class="header-anchor" href="#_1-3-4-1-jvm" aria-hidden="true">#</a> 1.3.4.1. JVM</h4><h5 id="_1-3-4-1-1-threads" tabindex="-1"><a class="header-anchor" href="#_1-3-4-1-1-threads" aria-hidden="true">#</a> 1.3.4.1.1. Threads</h5><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>jvm_threads_live_threads</td><td>None</td><td>Important</td><td>The current count of threads</td><td>jvm_threads_live_threads 25.0</td></tr><tr><td>jvm_threads_daemon_threads</td><td>None</td><td>Important</td><td>The current count of daemon threads</td><td>jvm_threads_daemon_threads 12.0</td></tr><tr><td>jvm_threads_peak_threads</td><td>None</td><td>Important</td><td>The max count of threads till now</td><td>jvm_threads_peak_threads 28.0</td></tr><tr><td>jvm_threads_states_threads</td><td>state=&quot;runnable/blocked/waiting/timed-waiting/new/terminated&quot;</td><td>Important</td><td>The count of threads in each status</td><td>jvm_threads_states_threads{state=&quot;runnable&quot;,} 10.0</td></tr></tbody></table><h5 id="_1-3-4-1-2-gc" tabindex="-1"><a class="header-anchor" href="#_1-3-4-1-2-gc" aria-hidden="true">#</a> 1.3.4.1.2. GC</h5><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>jvm_gc_pause_seconds_count</td><td>action=&quot;end of major GC/end of minor GC&quot;,cause=&quot;xxxx&quot;</td><td>Important</td><td>The total count of YGC/FGC events and its cause</td><td>jvm_gc_pause_seconds_count{action=&quot;end of major GC&quot;,cause=&quot;Metadata GC Threshold&quot;,} 1.0</td></tr><tr><td>jvm_gc_pause_seconds_sum</td><td>action=&quot;end of major GC/end of minor GC&quot;,cause=&quot;xxxx&quot;</td><td>Important</td><td>The total cost seconds of YGC/FGC and its cause</td><td>jvm_gc_pause_seconds_sum{action=&quot;end of major GC&quot;,cause=&quot;Metadata GC Threshold&quot;,} 0.03</td></tr><tr><td>jvm_gc_pause_seconds_max</td><td>action=&quot;end of major GC&quot;,cause=&quot;Metadata GC Threshold&quot;</td><td>Important</td><td>The max cost seconds of YGC/FGC till now and its cause</td><td>jvm_gc_pause_seconds_max{action=&quot;end of major GC&quot;,cause=&quot;Metadata GC Threshold&quot;,} 0.0</td></tr><tr><td>jvm_gc_memory_promoted_bytes_total</td><td>None</td><td>Important</td><td>Count of positive increases in the size of the old generation memory pool before GC to after GC</td><td>jvm_gc_memory_promoted_bytes_total 8425512.0</td></tr><tr><td>jvm_gc_max_data_size_bytes</td><td>None</td><td>Important</td><td>Max size of long-lived heap memory pool</td><td>jvm_gc_max_data_size_bytes 2.863661056E9</td></tr><tr><td>jvm_gc_live_data_size_bytes</td><td>None</td><td>Important</td><td>Size of long-lived heap memory pool after reclamation</td><td>jvm_gc_live_data_size_bytes 8450088.0</td></tr><tr><td>jvm_gc_memory_allocated_bytes_total</td><td>None</td><td>Important</td><td>Incremented for an increase in the size of the (young) heap memory pool after one GC to before the next</td><td>jvm_gc_memory_allocated_bytes_total 4.2979144E7</td></tr></tbody></table><h5 id="_1-3-4-1-3-memory" tabindex="-1"><a class="header-anchor" href="#_1-3-4-1-3-memory" aria-hidden="true">#</a> 1.3.4.1.3. Memory</h5><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>jvm_buffer_memory_used_bytes</td><td>id=&quot;direct/mapped&quot;</td><td>Important</td><td>An estimate of the memory that the Java virtual machine is using for this buffer pool</td><td>jvm_buffer_memory_used_bytes{id=&quot;direct&quot;,} 3.46728099E8</td></tr><tr><td>jvm_buffer_total_capacity_bytes</td><td>id=&quot;direct/mapped&quot;</td><td>Important</td><td>An estimate of the total capacity of the buffers in this pool</td><td>jvm_buffer_total_capacity_bytes{id=&quot;mapped&quot;,} 0.0</td></tr><tr><td>jvm_buffer_count_buffers</td><td>id=&quot;direct/mapped&quot;</td><td>Important</td><td>An estimate of the number of buffers in the pool</td><td>jvm_buffer_count_buffers{id=&quot;direct&quot;,} 183.0</td></tr><tr><td>jvm_memory_committed_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>Important</td><td>The amount of memory in bytes that is committed for the Java virtual machine to use</td><td>jvm_memory_committed_bytes{area=&quot;heap&quot;,id=&quot;Par Survivor Space&quot;,} 2.44252672E8<br>jvm_memory_committed_bytes{area=&quot;nonheap&quot;,id=&quot;Metaspace&quot;,} 3.9051264E7<br></td></tr><tr><td>jvm_memory_max_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>Important</td><td>The maximum amount of memory in bytes that can be used for memory management</td><td>jvm_memory_max_bytes{area=&quot;heap&quot;,id=&quot;Par Survivor Space&quot;,} 2.44252672E8<br>jvm_memory_max_bytes{area=&quot;nonheap&quot;,id=&quot;Compressed Class Space&quot;,} 1.073741824E9</td></tr><tr><td>jvm_memory_used_bytes</td><td area="heap/nonheap,id=&quot;xxx&quot;,"></td><td>Important</td><td>The amount of used memory</td><td>jvm_memory_used_bytes{area=&quot;heap&quot;,id=&quot;Par Eden Space&quot;,} 1.000128376E9<br>jvm_memory_used_bytes{area=&quot;nonheap&quot;,id=&quot;Code Cache&quot;,} 2.9783808E7<br></td></tr></tbody></table><h5 id="_1-3-4-1-4-classes" tabindex="-1"><a class="header-anchor" href="#_1-3-4-1-4-classes" aria-hidden="true">#</a> 1.3.4.1.4. Classes</h5><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>jvm_classes_unloaded_classes_total</td><td>None</td><td>Important</td><td>The total number of classes unloaded since the Java virtual machine has started execution</td><td>jvm_classes_unloaded_classes_total 680.0</td></tr><tr><td>jvm_classes_loaded_classes</td><td>None</td><td>Important</td><td>The number of classes that are currently loaded in the Java virtual machine</td><td>jvm_classes_loaded_classes 5975.0</td></tr><tr><td>jvm_compilation_time_ms_total</td><td compiler="HotSpot 64-Bit Tiered Compilers,"></td><td>Important</td><td>The approximate accumulated elapsed time spent in compilation</td><td>jvm_compilation_time_ms_total{compiler=&quot;HotSpot 64-Bit Tiered Compilers&quot;,} 107092.0</td></tr></tbody></table><h4 id="_1-3-4-2-file" tabindex="-1"><a class="header-anchor" href="#_1-3-4-2-file" aria-hidden="true">#</a> 1.3.4.2. File</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>Sample</th></tr></thead><tbody><tr><td>file_size</td><td>name=&quot;wal/seq/unseq&quot;</td><td>important</td><td>The current file size of wal/seq/unseq in bytes</td><td>file_size{name=&quot;wal&quot;,} 67.0</td></tr><tr><td>file_count</td><td>name=&quot;wal/seq/unseq&quot;</td><td>important</td><td>The current count of wal/seq/unseq files</td><td>file_count{name=&quot;seq&quot;,} 1.0</td></tr></tbody></table><h4 id="_1-3-4-3-logback" tabindex="-1"><a class="header-anchor" href="#_1-3-4-3-logback" aria-hidden="true">#</a> 1.3.4.3. Logback</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>示例</th></tr></thead><tbody><tr><td>logback_events_total</td><td level="trace/debug/info/warn/error,"></td><td>Important</td><td>The count of trace/debug/info/warn/error log events till now</td><td>logback_events_total{level=&quot;warn&quot;,} 0.0</td></tr></tbody></table><h4 id="_1-3-4-4-process" tabindex="-1"><a class="header-anchor" href="#_1-3-4-4-process" aria-hidden="true">#</a> 1.3.4.4. Process</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>示例</th></tr></thead><tbody><tr><td>process_cpu_load</td><td>name=&quot;cpu&quot;</td><td>core</td><td>current process CPU Usage (%)</td><td>process_cpu_load{name=&quot;process&quot;,} 5.0</td></tr><tr><td>process_cpu_time</td><td>name=&quot;cpu&quot;</td><td>core</td><td>total Process CPU Time Occupied (ns)</td><td>process_cpu_time{name=&quot;process&quot;,} 3.265625E9</td></tr><tr><td>process_max_mem</td><td>name=&quot;memory&quot;</td><td>core</td><td>The maximum available memory for the JVM</td><td>process_max_mem{name=&quot;process&quot;,} 3.545759744E9</td></tr><tr><td>process_used_mem</td><td>name=&quot;memory&quot;</td><td>core</td><td>The current available memory for the JVM</td><td>process_used_mem{name=&quot;process&quot;,} 4.6065456E7</td></tr><tr><td>process_total_mem</td><td>name=&quot;memory&quot;</td><td>core</td><td>The current requested memory for the JVM</td><td>process_total_mem{name=&quot;process&quot;,} 2.39599616E8</td></tr><tr><td>process_free_mem</td><td>name=&quot;memory&quot;</td><td>core</td><td>The free available memory for the JVM</td><td>process_free_mem{name=&quot;process&quot;,} 1.94035584E8</td></tr><tr><td>process_mem_ratio</td><td>name=&quot;memory&quot;</td><td>core</td><td>Memory footprint ratio of process</td><td>process_mem_ratio{name=&quot;process&quot;,} 0.0</td></tr><tr><td>process_threads_count</td><td>name=&quot;process&quot;</td><td>core</td><td>The current number of threads</td><td>process_threads_count{name=&quot;process&quot;,} 11.0</td></tr><tr><td>process_status</td><td>name=&quot;process&quot;</td><td>core</td><td>The process survivor status, 1.0 means survivorship, and 0.0 means terminated</td><td>process_status{name=&quot;process&quot;,} 1.0</td></tr></tbody></table><h4 id="_1-3-4-5-system" tabindex="-1"><a class="header-anchor" href="#_1-3-4-5-system" aria-hidden="true">#</a> 1.3.4.5. System</h4><table><thead><tr><th>Metric</th><th>Tag</th><th>level</th><th>Description</th><th>示例</th></tr></thead><tbody><tr><td>sys_cpu_load</td><td>name=&quot;cpu&quot;</td><td>core</td><td>current system CPU Usage(%)</td><td>sys_cpu_load{name=&quot;system&quot;,} 15.0</td></tr><tr><td>sys_cpu_cores</td><td>name=&quot;cpu&quot;</td><td>core</td><td>available CPU cores</td><td>sys_cpu_cores{name=&quot;system&quot;,} 16.0</td></tr><tr><td>sys_total_physical_memory_size</td><td>name=&quot;memory&quot;</td><td>core</td><td>Maximum physical memory of system</td><td>sys_total_physical_memory_size{name=&quot;system&quot;,} 1.5950999552E10</td></tr><tr><td>sys_free_physical_memory_size</td><td>name=&quot;memory&quot;</td><td>core</td><td>The current available memory of system</td><td>sys_free_physical_memory_size{name=&quot;system&quot;,} 4.532396032E9</td></tr><tr><td>sys_total_swap_space_size</td><td>name=&quot;memory&quot;</td><td>core</td><td>The maximum swap area of system</td><td>sys_total_swap_space_size{name=&quot;system&quot;,} 2.1051273216E10</td></tr><tr><td>sys_free_swap_space_size</td><td>name=&quot;memory&quot;</td><td>core</td><td>The available swap area of system</td><td>sys_free_swap_space_size{name=&quot;system&quot;,} 2.931576832E9</td></tr><tr><td>sys_committed_vm_size</td><td>name=&quot;memory&quot;</td><td>important</td><td>the amount of virtual memory available to running processes</td><td>sys_committed_vm_size{name=&quot;system&quot;,} 5.04344576E8</td></tr><tr><td>sys_disk_total_space</td><td>name=&quot;disk&quot;</td><td>core</td><td>The total disk space</td><td>sys_disk_total_space{name=&quot;system&quot;,} 5.10770798592E11</td></tr><tr><td>sys_disk_free_space</td><td>name=&quot;disk&quot;</td><td>core</td><td>The available disk space</td><td>sys_disk_free_space{name=&quot;system&quot;,} 3.63467845632E11</td></tr></tbody></table><h3 id="_1-3-5-add-custom-metrics" tabindex="-1"><a class="header-anchor" href="#_1-3-5-add-custom-metrics" aria-hidden="true">#</a> 1.3.5. Add custom metrics</h3><ul><li>If you want to add your own metrics data in IoTDB, please see the [IoTDB Metric Framework] (<a href="https://github.com/apache/iotdb/tree/master/metrics" target="_blank" rel="noopener noreferrer">https://github.com/apache/iotdb/tree/master/metrics<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>) document.</li><li>Metric embedded point definition rules <ul><li><code>Metric</code>: The name of the monitoring item. For example, <code>entry_seconds_count</code> is the cumulative number of accesses to the interface, and <code>file_size</code> is the total number of files.</li><li><code>Tags</code>: Key-Value pair, used to identify monitored items, optional <ul><li><code>name = xxx</code>: The name of the monitored item. For example, for the monitoring item<code>entry_seconds_count</code>, the meaning of name is the name of the monitored interface.</li><li><code>status = xxx</code>: The status of the monitored item is subdivided. For example, the monitoring item of the monitoring task can use this parameter to separate the running task and the stopped task.</li><li><code>user = xxx</code>: The monitored item is related to a specific user, such as the total number of writes by the root user.</li><li>Customize for the situation...</li></ul></li></ul></li><li>Monitoring indicator level meaning: <ul><li>The default startup level for online operation is <code>Important</code> level, the default startup level for offline debugging is <code>Normal</code> level, and the audit strictness is <code>Core &gt; Important &gt; Normal &gt; All</code></li><li><code>Core</code>: The core indicator of the system, used by the <strong>operation and maintenance personnel</strong>, which is related to the performance, stability, and security** of the system, such as the status of the instance, the load of the system, etc.</li><li><code>Important</code>: An important indicator of the module, which is used by <strong>operation and maintenance and testers</strong>, and is directly related to <strong>the running status of each module</strong>, such as the number of merged files, execution status, etc.</li><li><code>Normal</code>: General indicators of the module, used by <strong>developers</strong> to facilitate <strong>locating the module</strong> when problems occur, such as specific key operation situations in the merger.</li><li><code>All</code>: All indicators of the module, used by <strong>module developers</strong>, often used when the problem is reproduced, so as to solve the problem quickly.</li></ul></li></ul><h2 id="_1-4-how-to-get-these-metrics" tabindex="-1"><a class="header-anchor" href="#_1-4-how-to-get-these-metrics" aria-hidden="true">#</a> 1.4. How to get these metrics？</h2><p>The metrics collection switch is disabled by default，you need to enable it from <code>conf/iotdb-metric.yml</code>, Currently, it also supports hot loading via <code>load configuration</code> after startup.</p><h3 id="_1-4-1-iotdb-metric-yml" tabindex="-1"><a class="header-anchor" href="#_1-4-1-iotdb-metric-yml" aria-hidden="true">#</a> 1.4.1. Iotdb-metric.yml</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># whether enable the module</span>
<span class="token key atrule">enableMetric</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Is stat performance of operation latency</span>
<span class="token key atrule">enablePerformanceStat</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># Multiple reporter, options: [JMX, PROMETHEUS, IOTDB], IOTDB is off by default</span>
<span class="token key atrule">metricReporterList</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> JMX
  <span class="token punctuation">-</span> PROMETHEUS

<span class="token comment"># Type of monitor frame, options: [MICROMETER, DROPWIZARD]</span>
<span class="token key atrule">monitorType</span><span class="token punctuation">:</span> MICROMETER

<span class="token comment"># Level of metric level, options: [CORE, IMPORTANT, NORMAL, ALL]</span>
<span class="token key atrule">metricLevel</span><span class="token punctuation">:</span> IMPORTANT

<span class="token comment"># Predefined metric, options: [JVM, LOGBACK, FILE, PROCESS, SYSTEM]</span>
<span class="token key atrule">predefinedMetrics</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> JVM
  <span class="token punctuation">-</span> FILE

<span class="token comment"># The http server&#39;s port for prometheus exporter to get metric data.</span>
<span class="token key atrule">prometheusExporterPort</span><span class="token punctuation">:</span> <span class="token number">9091</span>

<span class="token comment"># whether store predefined metrics locally</span>
<span class="token key atrule">isStoreToLocal</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment"># The config of iotdb reporter</span>
<span class="token key atrule">ioTDBReporterConfig</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6667</span>
  <span class="token key atrule">username</span><span class="token punctuation">:</span> root
  <span class="token key atrule">password</span><span class="token punctuation">:</span> root
  <span class="token key atrule">database</span><span class="token punctuation">:</span> _metric
  <span class="token key atrule">pushPeriodInSecond</span><span class="token punctuation">:</span> <span class="token number">15</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then you can get metrics data as follows</p><ol><li>Enable metrics switch in <code>iotdb-metric.yml</code></li><li>You can just stay other config params as default.</li><li>Start/Restart your IoTDB server/cluster</li><li>Open your browser or use the <code>curl</code> command to request <code>http://servier_ip:9091/metrics</code>，then you will get metrics data like follows:</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>...
# HELP file_count
# TYPE file_count gauge
file_count{name=&quot;wal&quot;,} 0.0
file_count{name=&quot;unseq&quot;,} 0.0
file_count{name=&quot;seq&quot;,} 2.0
# HELP file_size
# TYPE file_size gauge
file_size{name=&quot;wal&quot;,} 0.0
file_size{name=&quot;unseq&quot;,} 0.0
file_size{name=&quot;seq&quot;,} 560.0
# HELP queue
# TYPE queue gauge
queue{name=&quot;flush&quot;,status=&quot;waiting&quot;,} 0.0
queue{name=&quot;flush&quot;,status=&quot;running&quot;,} 0.0
# HELP quantity
# TYPE quantity gauge
quantity{name=&quot;timeSeries&quot;,} 1.0
quantity{name=&quot;storageGroup&quot;,} 1.0
quantity{name=&quot;device&quot;,} 1.0
# HELP logback_events_total Number of error level events that made it to the logs
# TYPE logback_events_total counter
logback_events_total{level=&quot;warn&quot;,} 0.0
logback_events_total{level=&quot;debug&quot;,} 2760.0
logback_events_total{level=&quot;error&quot;,} 0.0
logback_events_total{level=&quot;trace&quot;,} 0.0
logback_events_total{level=&quot;info&quot;,} 71.0
# HELP mem
# TYPE mem gauge
mem{name=&quot;storageGroup&quot;,} 0.0
mem{name=&quot;mtree&quot;,} 1328.0
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-2-integrating-with-prometheus-and-grafana" tabindex="-1"><a class="header-anchor" href="#_1-4-2-integrating-with-prometheus-and-grafana" aria-hidden="true">#</a> 1.4.2. Integrating with Prometheus and Grafana</h3><p>As above descriptions，IoTDB provides metrics data in standard Prometheus format，so we can integrate with Prometheus and Grafana directly.</p><p>The following picture describes the relationships among IoTDB, Prometheus and Grafana</p><figure><img src="https://alioss.timecho.com/docs/img/UserGuide/System-Tools/Metrics/iotdb_prometheus_grafana.png" alt="iotdb_prometheus_grafana" tabindex="0" loading="lazy"><figcaption>iotdb_prometheus_grafana</figcaption></figure><ol><li>Along with running, IoTDB will collect its metrics continuously.</li><li>Prometheus scrapes metrics from IoTDB at a constant interval (can be configured).</li><li>Prometheus saves these metrics to its inner TSDB.</li><li>Grafana queries metrics from Prometheus at a constant interval (can be configured) and then presents them on the graph.</li></ol><p>So, we need to do some additional works to configure and deploy Prometheus and Grafana.</p><p>For instance, you can config your Prometheus as follows to get metrics data from IoTDB:</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">job_name</span><span class="token punctuation">:</span> pull<span class="token punctuation">-</span>metrics
<span class="token key atrule">honor_labels</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">honor_timestamps</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">scrape_interval</span><span class="token punctuation">:</span> 15s
<span class="token key atrule">scrape_timeout</span><span class="token punctuation">:</span> 10s
<span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> /metrics
<span class="token key atrule">scheme</span><span class="token punctuation">:</span> http
<span class="token key atrule">follow_redirects</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> localhost<span class="token punctuation">:</span><span class="token number">9091</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The following documents may help you have a good journey with Prometheus and Grafana.</p><p><a href="https://prometheus.io/docs/prometheus/latest/getting_started/" target="_blank" rel="noopener noreferrer">Prometheus getting_started<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config" target="_blank" rel="noopener noreferrer">Prometheus scrape metrics<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://grafana.com/docs/grafana/latest/getting-started/getting-started/" target="_blank" rel="noopener noreferrer">Grafana getting_started<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://prometheus.io/docs/visualization/grafana/#grafana-support-for-prometheus" target="_blank" rel="noopener noreferrer">Grafana query metrics from Prometheus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_1-4-3-apache-iotdb-dashboard" tabindex="-1"><a class="header-anchor" href="#_1-4-3-apache-iotdb-dashboard" aria-hidden="true">#</a> 1.4.3. Apache IoTDB Dashboard</h3><p>We provide the Apache IoTDB Dashboard, and the rendering shown in Grafana is as follows:</p><figure><img src="https://alioss.timecho.com/docs/img/UserGuide/System-Tools/Metrics/dashboard.png" alt="Apache IoTDB Dashboard" tabindex="0" loading="lazy"><figcaption>Apache IoTDB Dashboard</figcaption></figure><p>How to get Apache IoTDB Dashboard:</p><ol><li>You can obtain the json files of Dashboards corresponding to different iotdb versions in the grafana-metrics-example folder.</li><li>You can visit <a href="https://grafana.com/grafana/dashboards/" target="_blank" rel="noopener noreferrer">Grafana Dashboard official website<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, search for <code>Apache IoTDB Dashboard</code> and use</li></ol><p>When creating Grafana, you can select the json file you just downloaded to <code>Import</code> and select the corresponding target data source for Apache IoTDB Dashboard.</p><h1 id="_2-system-status-monitoring" tabindex="-1"><a class="header-anchor" href="#_2-system-status-monitoring" aria-hidden="true">#</a> 2. System Status Monitoring</h1><p>After starting JConsole tool and connecting to IoTDB server, a basic look at IoTDB system status(CPU Occupation, in-memory information, etc.) is provided. See <a href="https://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html" target="_blank" rel="noopener noreferrer">official documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for more information.</p><h1 id="_3-jmx-mbean-monitoring" tabindex="-1"><a class="header-anchor" href="#_3-jmx-mbean-monitoring" aria-hidden="true">#</a> 3. JMX MBean Monitoring</h1><p>By using JConsole tool and connecting with JMX you are provided with some system statistics and parameters.</p><p>This section describes how to use the JConsole <code>Mbean</code>tab of jconsole to monitor some system configurations of IoTDB, the statistics of writing, and so on. After connecting to JMX, you can find the &quot;MBean&quot; of &quot;org.apache.iotdb.service&quot;, as shown in the figure below.</p><p><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" src="https://alioss.timecho.com/docs/img/github/149951720-707f1ee8-32ee-4fde-9252-048caebd232e.png"> <br></p><h1 id="_4-performance-monitor" tabindex="-1"><a class="header-anchor" href="#_4-performance-monitor" aria-hidden="true">#</a> 4. Performance Monitor</h1><h2 id="_4-1-introduction" tabindex="-1"><a class="header-anchor" href="#_4-1-introduction" aria-hidden="true">#</a> 4.1. Introduction</h2><p>To grasp the performance of iotdb, this module is added to count the time-consumption of each operation. This module can compute the statistics of the avg time-consuming of each operation and the proportion of each operation whose time consumption falls into a time range. The output is in log_measure.log file. An output example is below.</p><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" src="https://alioss.timecho.com/docs/img/github/60937461-14296f80-a303-11e9-9602-a7bed624bfb3.png"><h2 id="_4-2-configuration-parameter" tabindex="-1"><a class="header-anchor" href="#_4-2-configuration-parameter" aria-hidden="true">#</a> 4.2. Configuration parameter</h2><p>location：conf/iotdb-datanode.properties</p><center><p><strong>Table -parameter and description</strong></p><table><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Default Value</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">enable_performance_stat</td><td style="text-align:left;">false</td><td style="text-align:left;">Is stat performance of sub-module enable.</td></tr></tbody></table></center><h1 id="_5-cache-hit-ratio-statistics" tabindex="-1"><a class="header-anchor" href="#_5-cache-hit-ratio-statistics" aria-hidden="true">#</a> 5. Cache Hit Ratio Statistics</h1><p>To improve query performance, IOTDB caches ChunkMetaData and TsFileMetaData. Users can view the cache hit ratio through debug level log and MXBean, and adjust the memory occupied by the cache according to the cache hit ratio and system memory. The method of using MXBean to view cache hit ratio is as follows:</p><ol><li>Connect to jconsole with port 31999 and select &#39;MBean&#39; in the menu item above.</li><li>Expand the sidebar and select &#39;org.apache.iotdb.db.service&#39;. You will get the results shown in the following figure:</li></ol><img style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;" src="https://alioss.timecho.com/docs/img/github/112426760-73e3da80-8d73-11eb-9a8f-9232d1f2033b.png"></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/apache/iotdb-docs/edit/main/src/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.md" rel="noopener noreferrer" target="_blank" aria-label="Found Error? Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Found Error? Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 33376433+LeiRui@users.noreply.github.com">Lei</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/UserGuide/V0.13.x/Maintenance-Tools/Watermark-Tool.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><!---->Watermark Tool</div></a><a class="vp-link nav-link next" href="/UserGuide/V0.13.x/Maintenance-Tools/Sync-Tool.html"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Sync Tool<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer style="padding-bottom:2rem;"><span id="doc-version" style="display:none;">rel/0.13</span><p style="text-align:center;color:#909399;font-size:12px;margin:0 30px;">Copyright © 2023 The Apache Software Foundation.<br> Apache and the Apache feather logo are trademarks of The Apache Software Foundation</p><p style="text-align:center;margin-top:10px;color:#909399;font-size:12px;margin:0 30px;"><strong>Have a question?</strong> Connect with us on QQ, WeChat, or Slack. <a href="https://github.com/apache/iotdb/issues/1995">Join the community</a> now.</p><p style="text-align:center;margin-top:10px;color:#909399;font-size:12px;margin:0 30px;"> We use <a href="https://analytics.google.com">Google Analytics</a> to collect anonymous, aggregated usage information. </p></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-1ba67e78.js" defer></script>
  </body>
</html>
