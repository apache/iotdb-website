(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{864:function(a,e,s){"use strict";s.r(e);var t=s(68),n=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"磁盘文件汇总"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#磁盘文件汇总"}},[a._v("#")]),a._v(" 磁盘文件汇总")]),a._v(" "),s("h2",{attrs:{id:"系统文件目录-data-system"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统文件目录-data-system"}},[a._v("#")]),a._v(" 系统文件目录 data/system")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("data/system/schema/mlog.txt (元数据日志)")]),a._v(" "),s("p",[a._v("http://iotdb.apache.org/SystemDesign/SchemaManager/SchemaManager.html#log-management-of-metadata")])]),a._v(" "),s("li",[s("p",[a._v("data/system/schema/system.properties (系统不可变参数)")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("partition_interval=9223372036854775807\ntimestamp_precision=ms\ntsfile_storage_fs=LOCAL\nenable_partition=false\nmax_degree_of_index_node=1024\ntag_attribute_total_size=700\niotdb_version=UNKNOWN\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])])]),a._v(" "),s("li",[s("p",[a._v("data/system/schema/tlog.txt (标签、属性文件）")]),a._v(" "),s("p",[a._v("http://iotdb.apache.org/SystemDesign/SchemaManager/SchemaManager.html#tlog")])]),a._v(" "),s("li",[s("p",[a._v("data/system/storage_groups/{sg_name}/{partition}/Version-xxx （每个分区的版本控制文件，无内容）")])]),a._v(" "),s("li",[s("p",[a._v("data/system/storage_groups/upgrade/Version-xxx (升级过程的版本控制文件)")])]),a._v(" "),s("li",[s("p",[a._v("data/system/upgrade/upgrade.txt (升级日志文件)")])])]),a._v(" "),s("p",[a._v("格式：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("oldTsFilePath,UpgradeCheckStatus\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("UpgradeCheckStatus: 表示文件的升级状态\n"),s("ul",[s("li",[a._v("BEGIN_UPGRADE_FILE(1): 待升级的文件")]),a._v(" "),s("li",[a._v("AFTER_UPGRADE_FILE(2): 升级后的文件已经封口")]),a._v(" "),s("li",[a._v("UPGRADE_SUCCESS(3): 完成了旧文件删除，移动新文件")])])])]),a._v(" "),s("p",[a._v("示例：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("xxx/root.group_11/upgrade/1587634378188-101-0.tsfile,1\nxxx/root.group_11/upgrade/1587634378188-101-0.tsfile,2\nxxx/root.group_11/upgrade/1587634378188-101-0.tsfile,3\n...\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[a._v("data/system/users/{user_name}.profile (用户信息)")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("1. username (UTF-8)\n2. password (UTF-8)\n3. privilegeNumber n (int)\n4. n privileges (Privelege)\n5. rolNumber k (int)\n6. k role names (UTF-8)\n7. UseWaterMarkFlag (Boolean)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("ul",[s("li",[a._v("data/system/roles/ (权限信息)")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("1. roleName (UTF-8)\n2. privilegeNumber n (int)\n3. n privileges (Privilege)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("Privilege 格式")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("1. bindingPath (UTF-8)\n2. privilegeNumber n (int)\n3. n privilegeOrdinals (int)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"数据文件目录-data-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据文件目录-data-data"}},[a._v("#")]),a._v(" 数据文件目录 data/data")]),a._v(" "),s("ul",[s("li",[a._v("data/data/sequence/{storage_group}/{partition}/{timestamp}-{version}-{merge_times}.tsfile (数据文件)")])]),a._v(" "),s("p",[a._v("http://iotdb.apache.org/SystemDesign/TsFile/Format.html#_1-2-tsfile-overview")]),a._v(" "),s("ul",[s("li",[a._v("data/data/sequence/{storage_group}/{partition}/{tsfile}.resource (对应TsFile的设备时间索引)")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("deviceId(String),start_time(long)\ndeviceId(String),start_time(long)\ndeviceId(String),end_time(long)\ndeviceId(String),end_time(long)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("ul",[s("li",[a._v("data/data/sequence/{storage_group}/{partition}/{tsfile}.mods (数据修改操作标记)")])]),a._v(" "),s("p",[a._v("http://iotdb.apache.org/SystemDesign/DataQuery/QueryFundamentals.html#query-with-modifications")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("data/data/sequence/{storage_group}/{partition}/{tsfile}-{level}-{timestamp}.vm (未封口的 TsFile 文件)")])]),a._v(" "),s("li",[s("p",[a._v("data/data/sequence/{storage_group}/{partition}/{tsfile}.flush (TsFile持久化memtable时的日志文件，无内容)")])]),a._v(" "),s("li",[s("p",[a._v("data/data/sequence/{storage_group}/{partition}/{tsfile}.vm.log (合并 vm 的日志文件)")])])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("源文件\n文件path\n目标文件\n文件path\ndevice，offset （已经合并的设备和目标文件完整的ChunkGroup的offset）\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h2",{attrs:{id:"写前日志目录-data-wal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写前日志目录-data-wal"}},[a._v("#")]),a._v(" 写前日志目录 data/wal")]),a._v(" "),s("ul",[s("li",[a._v("data/wal/{storage_group}-{tsfile_name}/wal{x} (对应某个 TsFile 的写前日志文件)")])]),a._v(" "),s("p",[a._v("文件格式为写入执行计划的序列化内容: InsertRowPlan、InsertTabletPlan、DeletePlan")]),a._v(" "),s("h2",{attrs:{id:"性能追踪目录-data-tracing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能追踪目录-data-tracing"}},[a._v("#")]),a._v(" 性能追踪目录 data/tracing")]),a._v(" "),s("ul",[s("li",[a._v("data/tracing/tracing.txt")])]),a._v(" "),s("p",[a._v("性能追踪选项默认关闭，用户可以使用 "),s("code",[a._v("TRACING ON/OFF")]),a._v(" 命令开启/关闭该功能。开启后，追踪日志记录在上述目录下，其格式为：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("QueryId - Start time\nQueryId - Query statement\nQueryId - Number of series paths\nQueryId - Number of tsfiles\nQueryId - Number of sequence files\nQueryId - Number of unsequence files\nQueryId - Number of chunks\nQueryId - Average size of chunks\nQueryId - End time\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);