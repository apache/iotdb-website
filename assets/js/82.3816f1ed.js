(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{648:function(e,t,a){"use strict";a.r(t);var o=a(69),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"data-concept"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-concept"}},[e._v("#")]),e._v(" Data Concept")]),e._v(" "),a("h2",{attrs:{id:"data-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-model"}},[e._v("#")]),e._v(" Data Model")]),e._v(" "),a("p",[e._v("A wind power IoT scenario is taken as an example to illustrate how to creat a correct data model in IoTDB.")]),e._v(" "),a("p",[e._v('According to the enterprise organization structure and equipment entity hierarchy, it is expressed as an attribute hierarchy structure, as shown below. The hierarchical from top to bottom is: power group layer - power plant layer - entity layer - measurement layer. ROOT is the root node, and each node of measurement layer is a leaf node. In the process of using IoTDB, the attributes on the path from ROOT node is directly connected to each leaf node with ".", thus forming the name of a timeseries in IoTDB. For example, The left-most path in Figure 2.1 can generate a timeseries named '),a("code",[e._v("root.ln.wf01.wt01.status")]),e._v(".")]),e._v(" "),a("center",[a("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://user-images.githubusercontent.com/19167280/122668849-b1c69280-d1ec-11eb-83cb-3b73c40bdf72.png"}})]),e._v(" "),a("p",[e._v("Here are the basic concepts of the model involved in IoTDB.")]),e._v(" "),a("h3",{attrs:{id:"measurement-entity-storage-group-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#measurement-entity-storage-group-path"}},[e._v("#")]),e._v(" Measurement, Entity, Storage Group, Path")]),e._v(" "),a("ul",[a("li",[e._v("Measurement (Also called field)")])]),e._v(" "),a("p",[a("strong",[e._v("Univariable or multi-variable measurement")]),e._v(". It is information measured by a detection equipment in an actual scene, and can transform the sensed information into an electrical signal or other desired form of information output and send it to IoTDB.  In IoTDB, all data and paths stored are organized in units of measuements.")]),e._v(" "),a("ul",[a("li",[e._v("Sub-measurement")])]),e._v(" "),a("p",[e._v("In multi-variable measurements, there are many sub-measurement. For example, GPS is a multi-variable measurements, including three sub-measurement: longitude, dimension and altitude. Multi-variable measurements are usually collected at the same time and share time series.")]),e._v(" "),a("p",[e._v("The univariable measurement overlaps the sub-measurement name with the measurement name. For example, temperature is a univariable measurement.")]),e._v(" "),a("ul",[a("li",[e._v("Entity (Also called device)")])]),e._v(" "),a("p",[a("strong",[e._v("An entity")]),e._v(" is an equipped with measurements in real scenarios. In IoTDB, all measurements should have their corresponding entities.")]),e._v(" "),a("ul",[a("li",[e._v("Storage Group")])]),e._v(" "),a("p",[a("strong",[e._v("A group of entities.")]),e._v(" Users can set any prefix path as a storage group. Provided that there are four timeseries "),a("code",[e._v("root.ln.wf01.wt01.status")]),e._v(", "),a("code",[e._v("root.ln.wf01.wt01.temperature")]),e._v(", "),a("code",[e._v("root.ln.wf02.wt02.hardware")]),e._v(", "),a("code",[e._v("root.ln.wf02.wt02.status")]),e._v(", two devices "),a("code",[e._v("wt01")]),e._v(", "),a("code",[e._v("wt02")]),e._v(" under the path "),a("code",[e._v("root.ln")]),e._v(" may belong to the same owner or the same manufacturer, so d1 and d2 are closely related. At this point, the prefix path root.vehicle can be designated as a storage group, which will enable IoTDB to store all devices under it in the same folder. Newly added devices under "),a("code",[e._v("root.ln")]),e._v(" will also belong to this storage group.")]),e._v(" "),a("blockquote",[a("p",[e._v("Note1: A full path ("),a("code",[e._v("root.ln.wf01.wt01.status")]),e._v(" as in the above example) is not allowed to be set as a storage group.")]),e._v(" "),a("p",[e._v("Note2: The prefix of a timeseries must belong to a storage group. Before creating a timeseries, users must set which storage group the series belongs to. Only timeseries whose storage group is set can be persisted to disk.")])]),e._v(" "),a("p",[e._v("Once a prefix path is set as a storage group, the storage group settings cannot be changed.")]),e._v(" "),a("p",[e._v("After a storage group is set, the ancestral layers, children and descendant layers of the corresponding prefix path are not allowed to be set up again (for example, after "),a("code",[e._v("root.ln")]),e._v(" is set as the storage group, the root layer and "),a("code",[e._v("root.ln.wf01")]),e._v(" are not allowed to be set as storage groups).")]),e._v(" "),a("p",[e._v("The Layer Name of storage group can only consist of characters, numbers, underscores and hyphen, like "),a("code",[e._v("root.storagegroup_1-sg1")]),e._v(".")]),e._v(" "),a("ul",[a("li",[e._v("Path")])]),e._v(" "),a("p",[e._v("In IoTDB, a path is an expression that conforms to the following constraints:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("path: LayerName (DOT LayerName)+\nLayerName: Identifier | STAR\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v('Among them, STAR is "*" and DOT is ".".')]),e._v(" "),a("p",[e._v('We call the middle part of a path between two "." as a layer, and thus '),a("code",[e._v("root.A.B.C")]),e._v(" is a path with four layers.")]),e._v(" "),a("p",[e._v("It is worth noting that in the path, root is a reserved character, which is only allowed to appear at the beginning of the time series mentioned below. If root appears in other layers, it cannot be parsed and an error is reported.")]),e._v(" "),a("p",[e._v('Single quotes are not allowed in the path. If you want to use special characters such as "." in LayerName, use double quotes. For example, '),a("code",[e._v('root.sg."d.1"."s.1"')]),e._v(".")]),e._v(" "),a("p",[e._v("The characters supported in LayerName without double quotes are as below:")]),e._v(" "),a("ul",[a("li",[e._v("Chinese characters '\\u2E80' to '\\u9FFF'")]),e._v(" "),a("li",[e._v("'+', '&', '%', '$', '#', '@', '/', '_', '-', ':'")]),e._v(" "),a("li",[e._v("'A' to 'Z', 'a' to 'z', '0' to '9'")]),e._v(" "),a("li",[e._v("'[', ']' (eg. 's[1', 's[1]', s[ab]')")])]),e._v(" "),a("p",[e._v("'-' and ':' cannot be the first character. '+' cannot use alone.")]),e._v(" "),a("blockquote",[a("p",[e._v("Note: the LayerName of storage group can only be characters, numbers, underscores and hyphen.")]),e._v(" "),a("p",[e._v("Besides, if deploy on Windows system, the LayerName is case-insensitive, which means it's not allowed to set storage groups "),a("code",[e._v("root.ln")]),e._v(" and "),a("code",[e._v("root.LN")]),e._v(" at the same time.")])]),e._v(" "),a("ul",[a("li",[e._v("Prefix Path")])]),e._v(" "),a("p",[e._v("The prefix path refers to the path where the prefix of a timeseries path is located. A prefix path contains all timeseries paths prefixed by the path. For example, suppose that we have three sensors: "),a("code",[e._v("root.vehicle.device1.sensor1")]),e._v(", "),a("code",[e._v("root.vehicle.device1.sensor2")]),e._v(", "),a("code",[e._v("root.vehicle.device2.sensor1")]),e._v(", the prefix path "),a("code",[e._v("root.vehicle.device1")]),e._v(" contains two timeseries paths "),a("code",[e._v("root.vehicle.device1.sensor1")]),e._v(" and "),a("code",[e._v("root.vehicle.device1.sensor2")]),e._v(" while "),a("code",[e._v("root.vehicle.device2.sensor1")]),e._v(" is excluded.")]),e._v(" "),a("ul",[a("li",[e._v("Path With Star")])]),e._v(" "),a("p",[e._v("In order to make it easier and faster to express multiple timeseries paths or prefix paths, IoTDB provides users with the path pith star. "),a("code",[e._v("*")]),e._v(" can appear in any layer of the path. According to the position where "),a("code",[e._v("*")]),e._v(" appears, the path with star can be divided into two types:")]),e._v(" "),a("p",[a("code",[e._v("*")]),e._v(" appears at the end of the path;")]),e._v(" "),a("p",[a("code",[e._v("*")]),e._v(" appears in the middle of the path;")]),e._v(" "),a("p",[e._v("When "),a("code",[e._v("*")]),e._v(" appears at the end of the path, it represents ("),a("code",[e._v("*")]),e._v(")+, which is one or more layers of "),a("code",[e._v("*")]),e._v(". For example, "),a("code",[e._v("root.vehicle.device1.*")]),e._v(" represents all paths prefixed by "),a("code",[e._v("root.vehicle.device1")]),e._v(" with layers greater than or equal to 4, like "),a("code",[e._v("root.vehicle.device1.*")]),e._v(", "),a("code",[e._v("root.vehicle.device1.*.*")]),e._v(", "),a("code",[e._v("root.vehicle.device1.*.*.*")]),e._v(", etc.")]),e._v(" "),a("p",[e._v("When "),a("code",[e._v("*")]),e._v(" appears in the middle of the path, it represents "),a("code",[e._v("*")]),e._v(" itself, i.e., a layer. For example, "),a("code",[e._v("root.vehicle.*.sensor1")]),e._v(" represents a 4-layer path which is prefixed with "),a("code",[e._v("root.vehicle")]),e._v(" and suffixed with "),a("code",[e._v("sensor1")]),e._v(".")]),e._v(" "),a("blockquote",[a("p",[e._v("Note1: "),a("code",[e._v("*")]),e._v(" cannot be placed at the beginning of the path.")])]),e._v(" "),a("blockquote",[a("p",[e._v("Note2: A path with "),a("code",[e._v("*")]),e._v(" at the end has the same meaning as a prefix path, e.g., "),a("code",[e._v("root.vehicle.*")]),e._v(" and "),a("code",[e._v("root.vehicle")]),e._v(" is the same.")])]),e._v(" "),a("h3",{attrs:{id:"timeseries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timeseries"}},[e._v("#")]),e._v(" Timeseries")]),e._v(" "),a("ul",[a("li",[e._v("Data point")])]),e._v(" "),a("p",[a("strong",[e._v('A "time-value" pair')]),e._v(".")]),e._v(" "),a("ul",[a("li",[e._v("Timeseries (A measurement of an entity corresponds to a timeseries. Also called meter, timeline, and tag, parameter in real time database)")])]),e._v(" "),a("p",[a("strong",[e._v("The record of a measurement of an entity on the time axis.")]),e._v(" Timeseries is a series of data points.")]),e._v(" "),a("p",[e._v("For example, if entity wt01 in power plant wf01 of power group ln has a measurement named status, its timeseries  can be expressed as: "),a("code",[e._v("root.ln.wf01.wt01.status")]),e._v(".")]),e._v(" "),a("ul",[a("li",[e._v("Multi-variable timeseries (Also called aligned timeseries, from v0.13)")])]),e._v(" "),a("p",[e._v("A multi-variable measurements of an entity corresponds to a multi-variable timeseries. These timeseries are called "),a("strong",[e._v("multi-variable timeseries")]),e._v(", also called "),a("strong",[e._v("aligned timeseries")]),e._v(".")]),e._v(" "),a("p",[e._v("Multi-variable timeseries need to be created, inserted and deleted at the same time. However, when querying, you can query each sub-measurement separately.")]),e._v(" "),a("p",[e._v("By using multi-variable timeseries, the timestamp columns of a group of multi-variable timeseries need to be stored only once in memory and disk when inserting data, instead of once per timeseries:")]),e._v(" "),a("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://user-images.githubusercontent.com/19167280/114125919-f4850800-9929-11eb-8211-81d4c04af1ec.png"}}),e._v(" "),a("p",[e._v("In the following chapters of data definition language, data operation language and Java Native Interface, various operations related to multi-variable timeseries will be introduced one by one.")]),e._v(" "),a("ul",[a("li",[e._v("Timestamp")])]),e._v(" "),a("p",[e._v("The timestamp is the time point at which data is produced. It includes absolute timestamps and relative timestamps. For detailed description, please go to Data Type doc.")]),e._v(" "),a("h3",{attrs:{id:"measurement-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#measurement-template"}},[e._v("#")]),e._v(" Measurement Template")]),e._v(" "),a("ul",[a("li",[e._v("Measurement template (From v0.13)")])]),e._v(" "),a("p",[e._v("In the actual scenario, many entities collect the same measurements, that is, they have the same measurements name and type. A "),a("strong",[e._v("measurement template")]),e._v(" can be declared to define the collectable measurements set. Measurement template is hung on any node of the tree data pattern, which means that all entities under the node have the same measurements set.")]),e._v(" "),a("p",[e._v("Currently you can only set one "),a("strong",[e._v("measurement template")]),e._v(" on a specific path. If there's one measurement template on one node, it will be forbidden to set any measurement template on the ancestors or descendants of this node.  An entity will use it's own measurement template or ancestor's measurement template.")]),e._v(" "),a("p",[e._v("In the following chapters of data definition language, data operation language and Java Native Interface, various operations related to measurement template will be introduced one by one.")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);