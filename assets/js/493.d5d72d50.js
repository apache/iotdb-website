(window.webpackJsonp=window.webpackJsonp||[]).push([[493],{1135:function(s,a,t){"use strict";t.r(a);var e=t(89),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"端云协同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端云协同"}},[s._v("#")]),s._v(" 端云协同")]),s._v(" "),t("h2",{attrs:{id:"_1-介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[s._v("#")]),s._v(" 1.介绍")]),s._v(" "),t("p",[s._v("同步工具是持续将边缘端（发送端） IoTDB 中的时间序列数据上传并加载至云端（接收端） IoTDB 的套件工具。")]),s._v(" "),t("p",[s._v("同步工具的发送端内嵌于 IoTDB 的引擎，使用同步工具需要首先启动IoTDB。")]),s._v(" "),t("p",[s._v("可以在发送端使用 SQL 命令来启动或者关闭一个同步任务，并且可以随时查看同步任务的状态。在接收端，您可以通过设置IP白名单来规定准入IP地址范围。")]),s._v(" "),t("h2",{attrs:{id:"_2-模型定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-模型定义"}},[s._v("#")]),s._v(" 2.模型定义")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://y8dp9fjm8f.feishu.cn/space/api/box/stream/download/asynccode/?code=ODYwOTUxMGI4YjI0N2FlOWFlZmI4MDcxNDlmZDE1MGZfQ1hzcVM1bXJxUkthd1hta3hSaDdnZW1aZHh2cE5iTUxfVG9rZW46Ym94Y25CRjF5dXd0QkVEYzVrSnJHcUdkd3VlXzE2NDkwNTkxNDc6MTY0OTA2Mjc0N19WNA",alt:"img"}})]),s._v(" "),t("p",[s._v("假设目前有两台机器A和B都安装了IoTDB，希望将A上的数据不断同步至B中。为了更好地描述这个过程，我们引入以下概念。")]),s._v(" "),t("ul",[t("li",[s._v("Pipe\n"),t("ul",[t("li",[s._v("指一次同步任务，在上述案例中，我们可以看作在A和B之间有一根数据流管道连接了A和B。")]),s._v(" "),t("li",[s._v("一个Pipe有三种状态，RUNNING，STOP，DROP，分别表示正在运行，暂停和永久取消。")])])]),s._v(" "),t("li",[s._v("PipeSink\n"),t("ul",[t("li",[s._v("指接收端，在上述案例中，PipeSink即是B这台机器。PipeSink的类型目前仅支持IoTDB，即接收端为B上安装的IoTDB实例。")]),s._v(" "),t("li",[s._v("PipeServer：当PipeSink的类型为IoTDB的时候，需要打开IoTDB的PipeServer服务来让Pipe数据得到处理。")])])])]),s._v(" "),t("h2",{attrs:{id:"_3-注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-注意事项"}},[s._v("#")]),s._v(" 3.注意事项")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("目前仅支持多对一模式，不支持一对多，即一个发送端只能发送数据到一个接收端，而一个接收端可以接受来自多个发送端的数据。")])]),s._v(" "),t("li",[t("p",[s._v("发送端只能有一个非DROP状态的Pipe，如果想创建一个新的Pipe，请取消当前Pipe。")])]),s._v(" "),t("li",[t("p",[s._v("当有一个或多个发送端指向一个接收端时，这些发送端和接收端各自的设备路径集合之间应当没有交集，否则可能产生不可预料错误")]),s._v(" "),t("p",[s._v("。")]),s._v(" "),t("ul",[t("li",[s._v("例如：当发送端A包括路径"),t("code",[s._v("root.sg.d.s")]),s._v("，发送端B也包括路径"),t("code",[s._v("root.sg.d.s")]),s._v("，当发送端A删除"),t("code",[s._v("root.sg")]),s._v("存储组时将也会在接收端删除所有B在接收端的"),t("code",[s._v("root.sg.d.s")]),s._v("中存放的数据。")])])]),s._v(" "),t("li",[t("p",[s._v("两台机器之间目前不支持相互同步。")])]),s._v(" "),t("li",[t("p",[s._v("同步工具仅同步所有对数据插入和删除，元数据的创建和删除，如TTL的设置，Trigger，CQ等其他操作均不同步。")])])]),s._v(" "),t("h2",{attrs:{id:"_4-快速上手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-快速上手"}},[s._v("#")]),s._v(" 4.快速上手")]),s._v(" "),t("p",[s._v("在发送端和接收端执行如下语句即可快速开始两个 IoTDB 之间的数据同步，完整的 SQL 语句和配置事项请查看"),t("code",[s._v("配置参数")]),s._v("和"),t("code",[s._v("SQL")]),s._v("两节，更多使用范例请参考"),t("code",[s._v("使用范例")]),s._v("节。")]),s._v(" "),t("h4",{attrs:{id:"_4-1接收端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1接收端"}},[s._v("#")]),s._v(" 4.1接收端")]),s._v(" "),t("ul",[t("li",[s._v("开启PipeServer")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("关闭PipeServer（在所有发送端取消了Pipe之后执行）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IOTDB> STOP PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_4-2发送端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2发送端"}},[s._v("#")]),s._v(" 4.2发送端")]),s._v(" "),t("ul",[t("li",[s._v("创建接收端为 IoTDB 类型的 Pipe Sink")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPESINK my_iotdb AS IoTDB (ip='输入你的IP')\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("创建同步任务Pipe（开启之前请确保接收端 IoTDB 的 PipeServer 已经启动）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPE my_pipe TO my_iotdb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("开始同步任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPE my_pipe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("显示所有同步任务状态")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPES\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("暂停任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> STOP PIPE my_pipe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("继续被暂停的任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPE my_pipe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("关闭任务（状态信息可被删除）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> DROP PIPE my_pipe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_5-配置参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置参数"}},[s._v("#")]),s._v(" 5.配置参数")]),s._v(" "),t("p",[s._v("所有参数修改均在"),t("code",[s._v("$IOTDB_HOME$/conf/iotdb-engine.properties")]),s._v("中，所有修改完成之后执行"),t("code",[s._v("load configuration")]),s._v("之后即可立刻生效。")]),s._v(" "),t("h4",{attrs:{id:"_5-1发送端相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1发送端相关"}},[s._v("#")]),s._v(" 5.1发送端相关")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("参数名")])]),s._v(" "),t("th",[t("strong",[s._v("max_number_of_sync_file_retry")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("描述")]),s._v(" "),t("td",[s._v("发送端同步文件到接收端失败时的最大重试次数")])]),s._v(" "),t("tr",[t("td",[s._v("类型")]),s._v(" "),t("td",[s._v("Int : [0,2147483647]")])]),s._v(" "),t("tr",[t("td",[s._v("默认值")]),s._v(" "),t("td",[s._v("5")])])])]),s._v(" "),t("h4",{attrs:{id:"_5-2接收端相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2接收端相关"}},[s._v("#")]),s._v(" 5.2接收端相关")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("参数名")])]),s._v(" "),t("th",[t("strong",[s._v("ip_white_list")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("描述")]),s._v(" "),t("td",[s._v("设置同步功能发送端 IP 地址的白名单，以网段的形式表示，多个网段之间用逗号分隔。发送端向接收端同步数据时，只有当该发送端 IP 地址处于该白名单设置的网段范围内，接收端才允许同步操作。如果白名单为空，则接收端不允许任何发送端同步数据。默认接收端接受全部 IP 的同步请求。")])]),s._v(" "),t("tr",[t("td",[s._v("类型")]),s._v(" "),t("td",[s._v("String")])]),s._v(" "),t("tr",[t("td",[s._v("默认值")]),s._v(" "),t("td",[s._v("0.0.0.0/0")])])])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("参数名")])]),s._v(" "),t("th",[t("em",[t("strong",[s._v("pipe_server_port")])])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("描述")]),s._v(" "),t("td",[s._v("同步接收端服务器监听接口，请确认该端口不是系统保留端口并且未被占用。")])]),s._v(" "),t("tr",[t("td",[s._v("类型")]),s._v(" "),t("td",[s._v("Short Int : [0,65535]")])]),s._v(" "),t("tr",[t("td",[s._v("默认值")]),s._v(" "),t("td",[s._v("6670")])])])]),s._v(" "),t("h2",{attrs:{id:"_6-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-sql"}},[s._v("#")]),s._v(" 6.SQL")]),s._v(" "),t("h4",{attrs:{id:"_6-1发送端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1发送端"}},[s._v("#")]),s._v(" 6.1发送端")]),s._v(" "),t("ul",[t("li",[s._v("创建接收端为 IoTDB 类型的 Pipe Sink，其中IP和port是可选参数")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPESINK <PipeSinkName> AS IoTDB [(ip='127.0.0.1',port=6670);]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("显示当前所能支持的 Pipe Sink 类型")])]),s._v(" "),t("div",{staticClass:"language-Plain%20Text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPESINKTYPE\nIoTDB>\n+-----+\n| type|\n+-----+\n|IoTDB|\n+-----+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("显示当前所有 Pipe Sink 定义，结果集有三列，分别表示pipesink的名字，pipesink的类型，pipesink的属性")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPESINKS\nIoTDB> SHOW PIPESINK [PipeSinkName]\nIoTDB> \n+-----------+-----+------------------------+\n|       name| type|              attributes|\n+-----------+-----+------------------------+\n|my_pipesink|IoTDB|ip='127.0.0.1',port=6670|\n+-----------+-----+------------------------+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("删除 Pipe Sink 信息")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> DROP PIPESINK <PipeSinkName>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("创建同步任务\n"),t("ul",[t("li",[s._v("其中Select语句目前仅支持"),t("code",[s._v("**")]),s._v("（即所有序列中的数据），FROM语句目前仅支持"),t("code",[s._v("root")]),s._v("，Where语句仅支持指定time的起始时间")]),s._v(" "),t("li",[t("code",[s._v("SyncDelOp")]),s._v("参数为true时会同步删除数据操作，否则不同步删除数据操作")])])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPE my_pipe TO my_iotdb [FROM (select ** from root WHERE time>=yyyy-mm-dd HH:MM:SS)] [WITH SyncDelOp=true]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("显示所有同步任务状态")])]),s._v(" "),t("blockquote",[t("p",[s._v("该指令在发送端和接收端均可执行")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("create time，pipe的创建时间")])]),s._v(" "),t("li",[t("p",[s._v("name，pipe的名字")])]),s._v(" "),t("li",[t("p",[s._v("role，当前IoTDB在pipe中的角色，可能有两种角色：")]),s._v(" "),t("ul",[t("li",[s._v("sender，当前IoTDB为同步发送端")])])]),s._v(" "),t("li",[t("p",[s._v("receiver，当前IoTDB为同步接收端")])]),s._v(" "),t("li",[t("p",[s._v("remote，pipe的对端信息")]),s._v(" "),t("ul",[t("li",[s._v("当role为receiver时，这一字段值为发送端ip")])])]),s._v(" "),t("li",[t("p",[s._v("当role为sender时，这一字段值为pipeSink名称")])]),s._v(" "),t("li",[t("p",[s._v("status，pipe状态")])]),s._v(" "),t("li",[t("p",[s._v("message，pipe运行信息，当pipe正常运行时，这一字段通常为空，当出现异常时，可能出现两种状态：")]),s._v(" "),t("ul",[t("li",[s._v("WARN状态，这表明发生了数据丢失或者其他错误，但是Pipe会保持运行")]),s._v(" "),t("li",[s._v("ERROR状态，这表明发生了网络长时间中断或者接收端出现问题，Pipe被停止，置为STOP状态")])])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPES\nIoTDB>\n+-----------------------+--------+--------+-------------+---------+-------+\n|            create time|   name |    role|       remote|   status|message|\n+-----------------------+--------+--------+-------------+---------+-------+\n|2022-03-30T20:58:30.689|my_pipe1|  sender|  my_pipesink|     STOP|       |\n+-----------------------+--------+--------+-------------+---------+-------+ \n|2022-03-31T12:55:28.129|my_pipe2|receiver|192.168.11.11|  RUNNING|       |\n+-----------------------+--------+--------+-------------+---------+-------+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("显示指定同步任务状态，当未指定PipeName时，与"),t("code",[s._v("SHOW PIPES")]),s._v("等效")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPE [PipeName]\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("暂停任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> STOP PIPE <PipeName>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("继续被暂停的任务")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPE <PipeName>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("关闭任务（状态信息可被删除）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> DROP PIPE <PipeName>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_6-2接收端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2接收端"}},[s._v("#")]),s._v(" 6.2接收端")]),s._v(" "),t("ul",[t("li",[s._v("启动本地的 IoTDB Pipe Server")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("关闭本地的 IoTDB Pipe Server")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> STOP PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("显示本地 Pipe Server 的信息\n"),t("ul",[t("li",[s._v("true表示PipeServer正在运行，false表示PipeServer停止服务")])])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPESERVER\n+----------+\n|    enalbe|\n+----------+\n|true/false|\n+----------+\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_7-使用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-使用示例"}},[s._v("#")]),s._v(" 7.使用示例")]),s._v(" "),t("h4",{attrs:{id:"目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[s._v("#")]),s._v(" "),t("strong",[s._v("目标")])]),s._v(" "),t("ul",[t("li",[s._v("创建一个从边端 IoTDB 到 云端 IoTDB 的 同步工作")]),s._v(" "),t("li",[s._v("边端希望同步从2022年3月30日0时之后的数据")]),s._v(" "),t("li",[s._v("边端不希望同步所有的删除操作")]),s._v(" "),t("li",[s._v("边端处于弱网环境，需要配置更多的重试次数")]),s._v(" "),t("li",[s._v("云端IoTDB仅接受来自边端的IoTDB的数据")])]),s._v(" "),t("h4",{attrs:{id:"接收端操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接收端操作"}},[s._v("#")]),s._v(" "),t("strong",[s._v("接收端操作")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("vi conf/iotdb-engine.properties")]),s._v(" 配置云端参数，将白名单设置为仅接收来自IP为 192.168.0.1的边端的数据")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("####################\n### PIPE Server Configuration\n####################\n# PIPE server port to listen\n# Datatype: int\n# pipe_server_port=6670\n\n# White IP list of Sync client.\n# Please use the form of network segment to present the range of IP, for example: 192.168.0.0/16\n# If there are more than one IP segment, please separate them by commas\n# The default is to allow all IP to sync\n# Datatype: String\nip_white_list=192.168.0.1/32\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ul",[t("li",[s._v("云端启动 IoTDB 同步接收端")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("云端显示 IoTDB 同步接收端信息，如果结果为true则表示正确启动")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"发送端操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发送端操作"}},[s._v("#")]),s._v(" "),t("strong",[s._v("发送端操作")])]),s._v(" "),t("ul",[t("li",[s._v("配置边端参数，将"),t("code",[s._v("max_number_of_sync_file_retry")]),s._v("参数设置为10")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("####################\n### PIPE Sender Configuration\n####################\n# The maximum number of retry when syncing a file to receiver fails.\nmax_number_of_sync_file_retry=10\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("创建云端PipeSink，指定类型为IoTDB，指定云端IP地址为192.168.0.1，指定云端的PipeServer服务端口为6670")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPESINK my_iotdb AS IoTDB (ip='192.168.0.1',port=6670)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("创建Pipe，指定连接到my_iotdb的PipeSink，在WHREE子句中输入开始时间点2022年3月30日0时，将SyncDelOp置为false")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> CREATE PIPE p TO my_iotdb FROM (select ** from root where time>=2022-03-30 00:00:00) WITH SyncDelOp=false\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("启动Pipe")])]),s._v(" "),t("div",{staticClass:"language-Plain%20Text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> START PIPE p\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("显示同步任务状态")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> SHOW PIPE p\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"结果验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结果验证"}},[s._v("#")]),s._v(" 结果验证")]),s._v(" "),t("p",[s._v("在发送端执行以下SQL")]),s._v(" "),t("div",{staticClass:"language-SQL line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" STORAGE "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" TIMESERIES root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s0 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" DATATYPE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("INT32"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ENCODING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RLE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" TIMESERIES root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" DATATYPE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TEXT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ENCODING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PLAIN"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" TIMESERIES root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" DATATYPE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FLOAT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ENCODING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RLE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" TIMESERIES root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("s3 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" DATATYPE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BOOLEAN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ENCODING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PLAIN"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'14'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18.0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vehicle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("s3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("在发送端和接受端执行查询，可查询到相同的结果")]),s._v(" "),t("div",{staticClass:"language-Plain%20Text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("IoTDB> select ** from root.vehicle\n+-----------------------------+------------------+------------------+------------------+------------------+\n|             Time|root.vehicle.d0.s0|root.vehicle.d0.s1|root.vehicle.d1.s3|root.vehicle.d1.s2|\n+-----------------------------+------------------+------------------+------------------+------------------+\n|2022-04-03T20:08:17.127+08:00|        10|       null|       null|       null|\n|2022-04-03T20:08:17.358+08:00|        12|        12|       null|       null|\n|2022-04-03T20:08:17.393+08:00|       null|        14|       null|       null|\n|2022-04-03T20:08:17.538+08:00|       null|       null|       null|       16.0|\n|2022-04-03T20:08:17.753+08:00|       null|       null|       true|       18.0|\n|2022-04-03T20:08:18.263+08:00|       null|       null|       false|       null|\n+-----------------------------+------------------+------------------+------------------+------------------+\nTotal line number = 6\nIt costs 0.134s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"_8-常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-常见问题"}},[s._v("#")]),s._v(" 8.常见问题")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("执行")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("STOP PIPESERVER\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("关闭本地的 IoTDB Pipe Server 时提示")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Msg: 328: Failed to stop pipe server because there is pipe still running.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("原因：接收端有正在运行的同步任务")]),s._v(" "),t("li",[s._v("解决方案：在发送端先执行 "),t("code",[s._v("STOP PIPE")]),s._v(" PipeName 停止任务，后关闭 IoTDB Pipe Server")])])]),s._v(" "),t("li",[t("p",[s._v("执行")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("CREATE PIPE mypipe\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("提示")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Msg: 411: Create transport for pipe mypipe error, because CREATE request connects to receiver 127.0.0.1:6670 error..\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("原因：接收端未启动或接收端无法连接")]),s._v(" "),t("li",[s._v("解决方案：在接收端执行 "),t("code",[s._v("SHOW PIPESERVER")]),s._v(" 检查是否启动接收端，若未启动使用 "),t("code",[s._v("START PIPESERVER")]),s._v(" 启动；检查接收端"),t("code",[s._v("iotdb-engine.properties")]),s._v("中的白名单是否包含发送端ip。")])])]),s._v(" "),t("li",[t("p",[s._v("执行")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("DROP PIPESINK pipesinkName\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("提示")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Msg: 411: Can not drop pipeSink demo, because pipe mypipe is using it.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("原因：不允许删除有正在运行的PIPE所使用的 PipeSink")]),s._v(" "),t("li",[s._v("解决方案：在发送端执行 "),t("code",[s._v("SHOW PIPE")]),s._v("，停止使用该 PipeSink 的 PIPE")])])]),s._v(" "),t("li",[t("p",[s._v("发送端创建 PIPE 提示")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Msg: 411: Pipe p is RUNNING, please retry after drop it.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("原因：已有运行中的 PIPE")]),s._v(" "),t("li",[s._v("解决方案：执行 "),t("code",[s._v("DROP PIPE p")]),s._v("后重试")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);