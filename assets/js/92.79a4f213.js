(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{707:function(a,e,t){"use strict";t.r(e);var s=t(80),n=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"system-integration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#system-integration"}},[a._v("#")]),a._v(" System Integration")]),a._v(" "),t("h2",{attrs:{id:"grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grafana-plugin"}},[a._v("#")]),a._v(" Grafana Plugin")]),a._v(" "),t("p",[a._v("Grafana is an open source tool for monitoring metrics and visualization, which could be applied to display time series and analyze the operation of application programms.")]),a._v(" "),t("p",[a._v("In the IoTDB project, we developed the Grafana Plugin to display time series through the IoTDB REST service, and it has provided many visualization methods for time series. Compared to IoTDB-Grafana-Connector, the Grafana Plugin works more efficiently and supports more types of queries. As long as it's possible in your deployment environment, *we highly recommand applying the Grafana Plugin rather than IoTDB-Grafana-Connector.")]),a._v(" "),t("h3",{attrs:{id:"deployment-of-the-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deployment-of-the-grafana-plugin"}},[a._v("#")]),a._v(" Deployment of the Grafana Plugin")]),a._v(" "),t("h4",{attrs:{id:"install-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-grafana"}},[a._v("#")]),a._v(" Install Grafana")]),a._v(" "),t("ul",[t("li",[a._v("Download Grafana: https://grafana.com/grafana/download")]),a._v(" "),t("li",[a._v("Version >= 7.0.0")])]),a._v(" "),t("h4",{attrs:{id:"download-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download-grafana-plugin"}},[a._v("#")]),a._v(" Download Grafana-plugin")]),a._v(" "),t("ul",[t("li",[a._v("Plugin Name: grafana-plugin")]),a._v(" "),t("li",[a._v("Downloads: https://github.com/apache/iotdb.git")])]),a._v(" "),t("p",[a._v("Execute the command below:")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/apache/iotdb.git\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"compile-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-grafana-plugin"}},[a._v("#")]),a._v(" Compile grafana-plugin")]),a._v(" "),t("h5",{attrs:{id:"option-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-1"}},[a._v("#")]),a._v(" Option 1")]),a._v(" "),t("p",[a._v("We need to compile the front-end engineering under the "),t("code",[a._v("grafana-plugin")]),a._v(" directory in IoTDB repository and generate the target directory "),t("code",[a._v("dist")]),a._v(". Below is the execution flow in detail:")]),a._v(" "),t("p",[a._v("You can use either of the following compilation methods:")]),a._v(" "),t("ul",[t("li",[a._v("Compile with maven, execute the command under "),t("code",[a._v("grafana-plugin")]),a._v("：")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("mvn "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" package\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("Or compile with yarn, execute the command under "),t("code",[a._v("grafana-plugin")]),a._v("：")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("If sucessed, we could find the generated target directory "),t("code",[a._v("dist")]),a._v(", which contains the compiled front-end Grafana Plugin:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"333px","max-height":"545px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/grafana-plugin-build.png?raw=true"}}),a._v(" "),t("h5",{attrs:{id:"option-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-2"}},[a._v("#")]),a._v(" Option 2")]),a._v(" "),t("p",[a._v("We could also obtain the front-end engineering of "),t("code",[a._v("grafana-plugin")]),a._v(" and other supporting IoTDB executables by executing the "),t("strong",[a._v("packaging command")]),a._v(" of the IoTDB project.")]),a._v(" "),t("p",[a._v("Execute the command under the root directory of IoTDB:")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v(" mvn clean package -pl distribution -am -DskipTests \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("If sucessed, we could find the generated target directory "),t("code",[a._v("distribution/target")]),a._v(", which consists the compiled front-end Grafana Plugin:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"333px","max-height":"545px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/distribution.png?raw=true"}}),a._v(" "),t("h4",{attrs:{id:"install-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-grafana-plugin"}},[a._v("#")]),a._v(" Install grafana-plugin")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Copy the generated front-end engineering target folder to the Grafana plugin directory "),t("code",[a._v("${Grafana File Directory}\\data\\plugins\\")])]),a._v(" "),t("ul",[t("li",[a._v("In Windows, the "),t("code",[a._v("data\\plugins")]),a._v(" directory will be automatically generated after Grafana booted")]),a._v(" "),t("li",[a._v("In Linux, the plugins directory "),t("code",[a._v("/var/lib/grafana/plugins")]),a._v(" needs to be manually created")]),a._v(" "),t("li",[a._v("In MacOS，the plugins directory is "),t("code",[a._v("/usr/local/var/lib/grafana/plugins")]),a._v(" (Check the CMD output after installing Grafana with 'brew install' for details of the path)")])])]),a._v(" "),t("li",[t("p",[a._v("Modify the profile of Grafana: find the profile ("),t("code",[a._v("${Grafana File Directory}\\conf\\defaults.ini")]),a._v("), and make the following modification:")]),a._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("allow_loading_unsigned_plugins")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("iotdb")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("If the Grafana service is already started, it needs to be rebooted.")])])]),a._v(" "),t("h4",{attrs:{id:"boot-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#boot-grafana"}},[a._v("#")]),a._v(" Boot Grafana")]),a._v(" "),t("p",[a._v("Go to the Grafana installation directory and start Grafana with the following command:")]),a._v(" "),t("ul",[t("li",[a._v("Windows:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("grafana-server.exe\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("Linux:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" grafana-server start\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("MacOS:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("brew services start grafana\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Click [Here] for more details (https://grafana.com/docs/grafana/latest/installation/)")]),a._v(" "),t("h4",{attrs:{id:"configure-the-iotdb-rest-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-iotdb-rest-service"}},[a._v("#")]),a._v(" Configure the IoTDB REST Service")]),a._v(" "),t("p",[a._v("Go to "),t("code",[a._v("{iotdb Directory}/conf")]),a._v(", open "),t("code",[a._v("iotdb-rest.properties")]),a._v(" and make the following modifications:")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Is the REST service enabled")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enable_rest_service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("false")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# the binding port of the REST service")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rest_service_port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("18080")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("Start(reboot) IoTDB to bring the configuration into effect, now the IoTDB Rest service is in operation.")]),a._v(" "),t("h3",{attrs:{id:"apply-the-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apply-the-grafana-plugin"}},[a._v("#")]),a._v(" Apply the Grafana Plugin")]),a._v(" "),t("h4",{attrs:{id:"visit-grafana-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#visit-grafana-dashboard"}},[a._v("#")]),a._v(" Visit Grafana Dashboard")]),a._v(" "),t("p",[a._v("Grafana displays the data for you in web dashbboards. Please visit "),t("code",[a._v("http://<ip>:<port>")]),a._v(" while using Grafana.\nNote："),t("code",[a._v("<ip>")]),a._v(" is the IP address of the server on which your Grafana resides, and "),t("code",[a._v("<port>")]),a._v(" is the running port of Grafana (Default: 3000).\nOn a local trial, the default address for the Grafana Dashboard is "),t("code",[a._v("http://localhost:3000/")]),a._v(".")]),a._v(" "),t("p",[a._v("The default username and password are both "),t("code",[a._v("admin")]),a._v(".")]),a._v(" "),t("h4",{attrs:{id:"add-iotdb-data-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-iotdb-data-source"}},[a._v("#")]),a._v(" Add IoTDB Data Source")]),a._v(" "),t("p",[a._v("Click the 'Settings' icon on the left, select the "),t("code",[a._v("Data Source")]),a._v(" option, then click "),t("code",[a._v("Add data source")]),a._v(".")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_1.png?raw=true"}}),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_2.png?raw=true"}}),a._v(" "),t("p",[a._v("Select the data source "),t("code",[a._v("Apache IoTDB")]),a._v(", fill the "),t("code",[a._v("URL")]),a._v(" with "),t("code",[a._v("http://<ip>:<port>")]),a._v(".")]),a._v(" "),t("p",[t("code",[a._v("<ip>")]),a._v(" is the host IP address where your IoTDB server resides, and "),t("code",[a._v("<port>")]),a._v(" is the running port of the REST service  (Default: 18080).")]),a._v(" "),t("p",[a._v("Enter the username and password of the IoTDB server, then click "),t("code",[a._v("Save & Test")]),a._v(", the configuration is succeeded when "),t("code",[a._v("Success")]),a._v(" was output.")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_3.png?raw=true"}}),a._v(" "),t("h4",{attrs:{id:"create-a-new-panel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-panel"}},[a._v("#")]),a._v(" Create a new Panel")]),a._v(" "),t("p",[a._v("Click the "),t("code",[a._v("Dashboards")]),a._v(" icon on the left, select the "),t("code",[a._v("Manage")]),a._v(" option as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/manage.png?raw=true"}}),a._v(" "),t("p",[a._v("Click the "),t("code",[a._v("New Dashboard")]),a._v(" icon on the upper-right and select "),t("code",[a._v("Add an empty panel")]),a._v(" as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/add%20empty%20panel.png?raw=true"}}),a._v(" "),t("p",[a._v("Enter the content in the SELECT, FROM, WHERE, and CONTROL fields. The WHERE and CONTROL fields are optional.")]),a._v(" "),t("p",[a._v("If a query involves more than one expression, we could add the expression in the SELECT clause by clicking on the "),t("code",[a._v("+")]),a._v(" to the right of the SELECT input box, or add the path prefix by clicking on the "),t("code",[a._v("+")]),a._v(" to the right of the FROM input box, as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/grafana_input.png?raw=true"}}),a._v(" "),t("p",[a._v("The contents of the SELECT input box can be suffixes of time series, functions or user-defined functions, arithmetic expressions, or nested expressions of them. You could also use the AS clause to rename the result sequence name that you want to display.")]),a._v(" "),t("p",[a._v("Here are some examples of valid inputs in the SELECT input box:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("s1")])]),a._v(" "),t("li",[t("code",[a._v("top_k(s1, 'k'='1') as top")])]),a._v(" "),t("li",[t("code",[a._v("sin(s1) + cos(s1 + s2)")])]),a._v(" "),t("li",[t("code",[a._v('udf(s1) as "Alias"')])])]),a._v(" "),t("p",[a._v("The contents of the FROM input box must be the prefix path of the time series, for example "),t("code",[a._v("root.sg.d")]),a._v("。")]),a._v(" "),t("p",[a._v("The WHERE input box is optional. The content should be the filtering criteria for the query, for example "),t("code",[a._v("time > 0")]),a._v(" or "),t("code",[a._v("s1 < 1024 and s2 > 1024")]),a._v("。")]),a._v(" "),t("p",[a._v("The CONTROL input field is optional and should contain special clauses to control the query type and output format. Here are some examples of valid inputs to the CONTROL input field:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("group by ([2017-11-01T00:00:00, 2017-11-07T23:00:00), 1d)")])]),a._v(" "),t("li",[t("code",[a._v("group by ([2017-11-01 00:00:00, 2017-11-07 23:00:00), 3h, 1d)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (PREVIOUSUNTILLAST)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (PREVIOUS, 1m)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (LINEAR, 5m, 5m)")])]),a._v(" "),t("li",[t("code",[a._v("group by ((2017-11-01T00:00:00, 2017-11-07T23:00:00], 1d), level=1")])]),a._v(" "),t("li",[t("code",[a._v("group by ([0, 20), 2ms, 3ms), level=1")])])]),a._v(" "),t("h4",{attrs:{id:"support-for-variables-and-templates"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#support-for-variables-and-templates"}},[a._v("#")]),a._v(" Support for Variables and Templates")]),a._v(" "),t("p",[a._v("This plugin supports the variables and templates of Grafana (https://grafana.com/docs/grafana/v7.0/variables/).")]),a._v(" "),t("p",[a._v('After creating a new Panel, click the "Settings" button on the upper-right, as shown below:')]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/setconf.png?raw=true"}}),a._v(" "),t("p",[a._v("Select "),t("code",[a._v("Variables")]),a._v(", click "),t("code",[a._v("Add variable")]),a._v(", as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/addvaribles.png?raw=true"}}),a._v(" "),t("p",[a._v("Enter Name, Label and Query, click the "),t("code",[a._v("Update")]),a._v(" button, as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/variblesinput.png?raw=true"}}),a._v(" "),t("p",[a._v("Apply Variables, enter the variables in "),t("code",[a._v("grafana panel")]),a._v(" and click "),t("code",[a._v("save")]),a._v(", as shown below:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/applyvariables.png?raw=true"}}),a._v(" "),t("h3",{attrs:{id:"more-informations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#more-informations"}},[a._v("#")]),a._v(" More Informations")]),a._v(" "),t("p",[a._v("More details about how Grafana works can be found in the official documentation of Grafana: http://docs.grafana.org/guides/getting_started/")])])}),[],!1,null,null,null);e.default=n.exports}}]);